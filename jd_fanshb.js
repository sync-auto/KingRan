/*
粉丝福利红包一次性
cron:49 14,15 30 8 *
============Quantumultx===============
[task_local]
#粉丝福利红包一次性
49 14,15 30 8 * jd_fanshb.js, tag=粉丝福利红包一次性, enabled=true
 */

const $ = new Env('粉丝福利红包一次性');
var OＯ0$='jsjiami.com.v6',OＯ0$_=['‮OＯ0$'],O00O=[OＯ0$,'MMOGK8KPwrg=','w7xHbH14','HsKLK8Owwro=','LsOGK8KPw5k=','wppMOkk=','w67CrsKKYWMgEQ==','ZE3Dn8OKQETDocO8wpVj','T8ODwpgswqc=','w4Jow5vCscKSbSQpFgY=','O148wrvDicOOHGLCp1A=','w6TDojLCpsOBw6pQwqLDohY=','w7xWwoHCihc=','MXrCogQ3','wqYsGW/DnFQfKcKLw7w=','DkLCkF8ow5Y7Ug==','A8KXF8Kl','w4YreCJ3','BxsGwo5vNXvCpg==','w4/DqQw/','ZsK1wp7CjcO6','w6/Cg8KEbS3CqsKzfw==','CUbDhgLDm8OYdU4=','w6PDm3Z/w5Q=','HWoJwpfCtg==','AcOaHQ==','DMKFAw==','XcK3wqlp','w6siEwfDiA==','5Lie5LqI5p2L5YqR5ZqM6LyW5ZqE56iS5pSi5o26','wrzCv3HChcOcw5E=','JwTDvBXCqw==','Bz4Bwp0=','LxvCvHs=','WC3CncOyCg==','E05MwoPCqEY=','JwTDvBXDig==','TFR9S8OA','w4wrwr/DkcOf','5LqP5Lqo5pye5YiM5Zu+6Ky46ZSR5pa45oyS5Lix56i/77yQ6K2J5qG55p+j6IWo6LmM6K+/5aWs57+p57q85oCb5YS4','wrbCjUN9DEU=','GUF+w6LCgw==','eMOKwp7DrMOk','Q8OsUgXChA==','P8OCw6Y=','UlRiXQ==','w7Mkw7jCjAIz','wrM0woPDpcO+D1jCjz1mTGM=','JsOIKsOQwo/CgQ==','Z8Kwwp3DrsO4NEXDvcK+OsOxfAU=','wp/Cv2ktw6AOU8O1bg==','w67CrsKIYWAs','w6bDly9KwrfDvcO2','w4MTw4LCsw==','VsK4wrI=','w5dfwq/DhMOVKUPCpw==','w6TChMKR','VcK3wqh/wqQ=','wrIZH2LDh0U6','w67ChWMtwqfDlD0+','w50WV1PCmcKBNA==','w5k4w5nCiA8zwqrDq8O9','O1DDlxTDtMONeQ==','YcONwoMkwqbCscO/QMKv','w7vDlTo=','w4bChxkvHsKS','LmciwqbDlsOZ','w7k0w6jCg3Z8woVn','w7pXwrM=','6aOJ5Y2tLcO777+x','w5TDnS/CpMOSw6pewoPCow==','6Kyy5YqP6ZmW5oet5Z6pw7zCuA/Cu8OR6Lyo5YeV5qKK5L6Y5pWC5YeM5a6IdeW6nuithOmDrOi+kuiHmeadj+WPrOiNm+WNi8KscnPDhBnCnw==','YsOcEDk=','44Ki5o2E56W844Ch6KyT5YaK6I+t5Y6+5Lu+5LiI6LSj5Yym5LuBDwrCh8KUVcKgwqjnmKrmjbXkvK/nlLnDrcOIwoDDgBlk55mM5Lmo5Lq5562W5Yik6I2m5Y6o','VcO+HR7DjMK/OX8bwoAUXzbCnsKewrUMw6cfwqcJw7LCtTA8wrvDgm/Cg8Kcwqg9wpbCkF9ZZsOeJw7CnGvCjA==','w5tpw7RD','bWRAaQ==','csKEQsKd','w5DCpcK2SQ==','OsORw4Mf','5LiB5Lu25pyB5Yun5Zqm6KyO6ZaZ5pSK5o+45LqS56uM776i6K2d5qKf5p+Y6IaQ6LmD6K2u5aSP57+G57iS5oOg5YSe','IsOIAw==','c8KSw5wA','w7VvwoTDsMOjUTnDjytqS3Q4SxvDiBd3WcKww5bCrcO/K8KgwpkUw5xhw681PCgeeDYsU0vDj1XCgsK4','BsKvwqbDhcKL','RcOgwqHCu8OfCg==','w6B3w6bCl8K5','G3YEQl8=','YsOCbznCrg==','w4jCiQInHw==','UcOsQx3CpMKWwq4=','w6XCvMKlZUEnGw==','wpDConc=','BsOew6RcO2oGw7Y=','wqvDqsKEUsK0','w5cSV1TCkA==','wqzCl1VxGg==','w753wpnCicK5','AsKSw54hw7hPUg==','w6w7w6HCn8OYUTJN','w649w6U=','Nh8lEsKPU8Oq5by05aam44Gn5Lm65LiR6LeJ5Y+q','CUXCl1Ee','PcOEw6JFO2oGw7Y=','w4/DtxJAw6Y=','woo/w6nDksOO','w6RoLw==','MlTDjhU=','5Li25LmL6LaQ5YyU','IlI7w4zCqcODwpsB','w68ARkXCtsKUOMK7','w5lMw53CqMKbMk9jBwB3VcOew69vwpHDoMKbdk5xAThAw4tGwo/DsmDDmF3CuwrChTg/w5TCgsOYDMKvbgo=','w4bCgnDDvw==','cHjDmcOHW1XDhA==','VMKzwrBowqDDjcKc','Mxxpw5Y=','w4PCgRowEsKF','OsO6wpnDrsO1NF7Dv8KxJg==','TMODwoEq','PAEAwpdPNXvCpg==','5LiW5Lmv6LSF5Y+A','CMKYAMKlwpE=','Yuivg+mFoOaWleeageW/vuiOgOWNvsKBA3QHwqJb','wqvDtMO7LQ==','w5jDvQ/Cng==','w7vDnSc=','w7zDml0J','AMO0VMOuwqQ=','CMKFKsKvwo03','OUIlFkAtbsOWUcKA','PsOew6Y=','eXzDgMOG','MMOMw7VNHQ==','w6vCssKh','D8KXCcKl','QcKV5aWL6LaCLsKH5Yyb5Zu2YMOi','RMOLwoIuwqPCuMO1','wrIRwrDClg==','w4QWNTk=','YsKHwpVDw7E=','BMKDw7grw7xS','w4/Dt21e','w6LDmjx2','wrk6biA=','w6DCp8KvfihpG8OAwpTCmMK2NMKBKz7Csw8=','w6xAw5DDvRc=','RlLDosKTaw==','AsOiw44eOg==','csOlQsOiw5k=','GxcEQg==','wq3CnEESw5s=','w6LCu10J','wrXDtMKELcOV','wr0IH3bDlQt0Y8KPw657w6VDNGfDpsOQw7EOwrvCrMOLQcKzVEprLFnCtHoicWBIwr1Qw4RHFTx0SCvDhMOlwrfDnDwHw4jCrsKTKT5nwpTDlEPDtQERZAzDkmI4','wrDDhyksQMKKMB5YwqrCsTo+wrfDscO/wqDCmMK2wr7DjlHCvsKGa0vDqD8Bw5QAJ8O1Pg8AwopzHR1Qw4dIw5x0O8ORDMOoB8KdWVcwK8OkMcOdwpPDoFHColVMw4IhBgLCvELCrznDt8KCOGwow7HDlsOqcsK/GcKt','wpjCu2w=','w40dwrLCu8OZ','ZsOKwp7CjcKb','w5gDw5TCq2slw5o+w40Q','K0TCjRrDscKXe0RU','CF/Ch0QVwo15GMKtR05Pw6NLI1Irw6wkw4ZeVltINcOnVEQDbjLDpcOkYcO1VcONwr47LHXCr0nDrg9MHsOSwrLCpcKYwqnDqxNuw5HCgHdjw43CimrDlwY7wp50','wpUoYQ==','woUDw7zCqCjDhVDCvcKcw7rCm8KSH1F4wrhcXjMfwrhOwoA0VcKZw7dLwpnDmMKHwoXDgGo2RSNuPcOzwqdTw6hdwrFaw5pTXcKmGRjDscKSUSLCtsK2wpfDtMKrXD9IwozCqULCug3CrMKOFMOQQFIYMBzCuMOGZV/DvcOb','w4zChcKdbw/Cp8K/NcK6w4lvCTHCiMK4ISXCnGZ/w6EAGCtHwrZNwrxZXMKvJFjCkjfDhx/Cu8KjLHPCqQ0ASHHDg8K3YmvClCPDisOtw74SwpbDlcKDR8KDw7xIwq5vw7fCrcOXDXkNcMKHPwTCkCHDuMK/BcOpRcOPHMK8OAvCl8OsMio6fcKHw7MkVcKzSMOew5BxwpYdPsK1M8OdwpXCgcO6w5Aqw4pjYG/DgX4fw7DDvhXDkMK3G0Nnw5zCtcKbw4VKPcK1w5vDhQ==','w5jDvRHCng==','c8OtwqN/w78=','w7w4DX14','wpt+UGA0','wqvDqsOlM8Kq','RcOqwqg=','w7hXwqM=','IMOZw7NHG2wCw7XDow==','wrkTDA==','XcOsTRM=','McOMw6JFMGUP','w5/DtTJTwow=','Km8twrnDtsOFPA==','w5DDtSVbwqHCrD4=','L3rCvHsp','OQTCnWrCtQ==','AMKLK8OuwqQ=','T8ObdMOow6TDtQ==','GT4fwoPCgw==','wpLCpHM2w5oAE8O6','wpDCilRmLEMawog=','CMKNw4Y=','KcOFwqxNGw==','IUIuAiMjdsOWQcKc','w5lXwr5lcwRZw7/CqcOnwpHCkAzDhhs1ZlrDmcOfIX9Hw7oxOCgxcy4Pw7UeCsKMw6Bow4t+HsOtR8K/E8Kvwq9kwqkoIMOTTRoQcsKewocFw5HDqCETw5DDvcKJZsK7VcOReEXCiSE6AyzChjEow7Fsw6hpw7NPT8KkwoNTw5PCrFTDscOOwo/CiT3CocKDw6zDiTdUIMOAK8Kuw4HDoTRmBsO0CcOYKVInFsOfCSgCccOsS8O4wrhResOCY8KBSsKJw6DDqA==','MWTCvGU=','GMKvwqbDm8O0','w796wpPDq8OVBXI=','w5A0Yw==','w4bCghHDv8O0','w6JWw6DCihc=','worDiX4kUg==','IHo6wqLDgMKRdyjCo0LDjj7CvQFQw6zDpMKxFRHCmzzCogsXcE/Cugo3wpjDhcKuwonDt1fDnFZzw6TCuGvDvsKPw63DksK0wo3DhMKNIDZYw40Bwr8cwoB8wr3CjHLCrhHDkGrCgcKPwoRAeGEkwqwcE8K2FsOYw5dUUF0=','TcKSw7Erw7FDSk3Co8OLw4s1wr3DkUfDonPDucKhw70GIsOXHEYwZXjCu8O1wo1GPsObw5NWXMOPbMKmw4liwqLDsMKKKnrDkA7DrALDv8OBwpPDhcOmHV/Dkj7CkMK2SgzCgMKvdsKLZMO9w7ZUaErCqcKqw4bDv8OGY3HDisO+wqU=','wrhAeA==','w57DuyE=','w6rCvMKybWw=','UcOywp4mwrXCscOIb8KYVA==','5ayK776+6I+35b2Y776h','w7LCusKVbxnCrsKaf8O8woQ=','GMOQwrjDm8O0','w4fDu3p5','w6PDhRcA','bMK6JiE=','w4rCkGU2w6LCkRMfw7DDhMOXw5rDj3MdGMKa','NcOTScOcwoU=','JsKOw6gnw7NKXQPDusOYw4kzw7LDp3vDpXvDvsKqwplSGMO3LFtoE3PCtcO3woQEEMOrwphaGcOlO8O0w5xUwqjDtsOeDm3DllrDhjzCr8O2w4jChMOVFAnDmQTCs8KqFSvCmsO9OMONJMKLwrcBI0bDscO5wo3CgcK2D1jCsMK2wrDCgsK6w7/DiMOMSSgOw4dwwohUMmpOSn1gaxjDlcKVecKSwoDDozfCt8OPAglCRzF9bMKwIcKlwqLDqS/CgcK8w4TCnDZTDz9qwr/Dtg==','B18fw6LDog==','c3ped8Oq','ZsOUw7/DrMKb','WEzDvMOyaw==','wpotOjbDqQ==','wobDhMOXCcKgZMOf','wr7DsRM=','wrB4wpw=','w73DhRdhwqs=','J2XCnXTDig==','wrXClcKEUsK0','cH/Cv8KtGA0+VMOY','KEYoGUssfg==','w7MjVg==','wrHDgSPCqsOVw6piwqbDvUjCncO3ScO+w5h3w7LDrATDjWhzw5LCgcOYBG9BwrDCjwbDjSPCosOAVAdRRXd0EGzCnlvDiEJzwrUFwqzConnDnsKAfsKIwqoPwrwUwo7DlyrCh2FdwqEfw6VZw6o7AMKmMsKJw5Fzw4/CrC8F','w4xKwqHCsMKg','JGEpwpfDgcOZ','YsKHw7RDwpA=','w6zDlzo=','6aCe5Y24Z8KW77+f','YsOCcUY=','LlDDlxPDusOdfQ==','w4YrGV0=','wqcRwqrChw==','w7VIwrRgdgtZwqTDtcKmw4/Cn1zCgjwqfhnDmsKLc1E6w5pjPR03fy8OwrA1','w5kCw5DCqzZ/w58Hw5MawqXCtkHCgXhDDsO6wpNcwrHCtS4ywrpRw6/ChsOuwphAwoLDtmc7B2zDq8O7dlcZDjXCssKtwrnDq8O7w5DCi8KZwrYFY1LDucK5Jx3Dq8Orw7wsYMK6wqpmw53DhMOcQlvDlSprw4EXw4jCvsOpHMKSKiLDssO6w5bCiGfCtSfDoMONd8ObYUXCpsOaw4ZWbcOxw5NBE8Kxw5HDrXrDncKpw6ZawpHDqVPCuyvCglJuwp01w6zDvcK/QAzDvULChMKHw4Yzw5Mhwqc+w77DncKgwqRBYMKOWTnCj8Ksw7NQKQ7DgcKAIMO5wrc=','G2h7PUE=','GMOQwqbDm8KL','w7TCpyd0Rw==','GMOOw4fCusOq','OCNVwrRQ','L2TCvAQ3','YsKZw7RDwpA=','BsOOwqbDhcOq','w5bDrcO2Xw==','fMKHwpVDwo4=','c3pACMOq','CF/Ch0QVwo15GMKtR05Pw6NLI1Irw6www5ZPTQJEL8KzFAc9dDzDo8OvTsOQc8OLwqksSmrCvEPCowVwD8OZwrrCo8KYwqbCokg=','w7wmbAIZ','M2NpwrfCmg==','w6vDnTh/w7vDv8Oyw7fDqQg=','wpTCqAFFLQ==','S8ORwqIgwqvCsQ==','OVvDlQ==','aMOmwrMawpzCkcOeVcKqcMOJfQo=','w785w4A=','wprClEnClcO9w6ZGwoo0woJgw5jCrA==','wovDhyMXMsKlXQDCow7DgsO8Uw==','aMOZLDzDoMOEURU3wrE=','w6bCj8KTYgLCv8K/','w6k0w4rCjA==','w5XDsTJUwoXCtjs=','w7DDly57','w73DhXZ/wrU=','w7TCpycLJg==','5a2N77+c6I6h5b2X7760','w75pwpnCl8Kn','E2TDskDCpQ==','c2Q/CA==','w5nDpXp5','w4xKwqHDkcOf','wpQhwojCs8OO','ZW/DssKsOU05','A8KXB8Krwqw8LQ==','QMODwo8kworCusOo','HMKdwrEeOg==','w4JMw5vCscKGbwkqHA==','w63ChcKA','w4vCiRsh','AsOjwrwG6Ky45rKW5aa96LSv77+n6K+A5qGM5p+W57yP6LW56YWT6K2m','w4fDpXoYHg==','w6JWw77ClAk=','w7l6OmEi','jRCCpIsjiami.qZIlAlcJomkh.v6=='];if(function(_0x360aa8,_0x30dcfa,_0x16b82c){function _0x20a256(_0x20ed0b,_0x500a28,_0x50db56,_0x115023,_0x288af9,_0x276b56){_0x500a28=_0x500a28>>0x8,_0x288af9='po';var _0x571523='shift',_0x32965d='push',_0x276b56='‮';if(_0x500a28<_0x20ed0b){while(--_0x20ed0b){_0x115023=_0x360aa8[_0x571523]();if(_0x500a28===_0x20ed0b&&_0x276b56==='‮'&&_0x276b56['length']===0x1){_0x500a28=_0x115023,_0x50db56=_0x360aa8[_0x288af9+'p']();}else if(_0x500a28&&_0x50db56['replace'](/[RCCpIqZIlAlJkh=]/g,'')===_0x500a28){_0x360aa8[_0x32965d](_0x115023);}}_0x360aa8[_0x32965d](_0x360aa8[_0x571523]());}return 0x100148;};return _0x20a256(++_0x30dcfa,_0x16b82c)>>_0x30dcfa^_0x16b82c;}(O00O,0x148,0x14800),O00O){OＯ0$_=O00O['length']^0x148;};function O0QQ(_0x32c876,_0x5c0a40){_0x32c876=~~'0x'['concat'](_0x32c876['slice'](0x1));var _0x21384d=O00O[_0x32c876];if(O0QQ['QQ0QQO']===undefined){(function(){var _0x29e3f3=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x2097b2='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x29e3f3['atob']||(_0x29e3f3['atob']=function(_0x3f9280){var _0xb73f37=String(_0x3f9280)['replace'](/=+$/,'');for(var _0x4eae02=0x0,_0x5389bf,_0x2d42e7,_0xd842b8=0x0,_0x1ae9bd='';_0x2d42e7=_0xb73f37['charAt'](_0xd842b8++);~_0x2d42e7&&(_0x5389bf=_0x4eae02%0x4?_0x5389bf*0x40+_0x2d42e7:_0x2d42e7,_0x4eae02++%0x4)?_0x1ae9bd+=String['fromCharCode'](0xff&_0x5389bf>>(-0x2*_0x4eae02&0x6)):0x0){_0x2d42e7=_0x2097b2['indexOf'](_0x2d42e7);}return _0x1ae9bd;});}());function _0x5d7cbf(_0x22c34e,_0x5c0a40){var _0x329112=[],_0x263365=0x0,_0xe181a1,_0x29d211='',_0x3227fc='';_0x22c34e=atob(_0x22c34e);for(var _0x19d6d8=0x0,_0x23e076=_0x22c34e['length'];_0x19d6d8<_0x23e076;_0x19d6d8++){_0x3227fc+='%'+('00'+_0x22c34e['charCodeAt'](_0x19d6d8)['toString'](0x10))['slice'](-0x2);}_0x22c34e=decodeURIComponent(_0x3227fc);for(var _0x2b69bb=0x0;_0x2b69bb<0x100;_0x2b69bb++){_0x329112[_0x2b69bb]=_0x2b69bb;}for(_0x2b69bb=0x0;_0x2b69bb<0x100;_0x2b69bb++){_0x263365=(_0x263365+_0x329112[_0x2b69bb]+_0x5c0a40['charCodeAt'](_0x2b69bb%_0x5c0a40['length']))%0x100;_0xe181a1=_0x329112[_0x2b69bb];_0x329112[_0x2b69bb]=_0x329112[_0x263365];_0x329112[_0x263365]=_0xe181a1;}_0x2b69bb=0x0;_0x263365=0x0;for(var _0x3c3a46=0x0;_0x3c3a46<_0x22c34e['length'];_0x3c3a46++){_0x2b69bb=(_0x2b69bb+0x1)%0x100;_0x263365=(_0x263365+_0x329112[_0x2b69bb])%0x100;_0xe181a1=_0x329112[_0x2b69bb];_0x329112[_0x2b69bb]=_0x329112[_0x263365];_0x329112[_0x263365]=_0xe181a1;_0x29d211+=String['fromCharCode'](_0x22c34e['charCodeAt'](_0x3c3a46)^_0x329112[(_0x329112[_0x2b69bb]+_0x329112[_0x263365])%0x100]);}return _0x29d211;}O0QQ['O0QQOQ']=_0x5d7cbf;O0QQ['O0OO0Q']={};O0QQ['QQ0QQO']=!![];}var _0x3c2228=O0QQ['O0OO0Q'][_0x32c876];if(_0x3c2228===undefined){if(O0QQ['QQ00Q0']===undefined){O0QQ['QQ00Q0']=!![];}_0x21384d=O0QQ['O0QQOQ'](_0x21384d,_0x5c0a40);O0QQ['O0OO0Q'][_0x32c876]=_0x21384d;}else{_0x21384d=_0x3c2228;}return _0x21384d;};const notify=$[O0QQ('‫0','CsbU')]()?require(O0QQ('‫1','nqdP')):'';const jdCookieNode=$[O0QQ('‮2','wTwW')]()?require(O0QQ('‫3','Ztuz')):'';CryptoJS=$['isNode']()?require(O0QQ('‮4',']FEk')):CryptoJS;let cookiesArr=[],cookie='';if($[O0QQ('‫5','V!OA')]()){Object['keys'](jdCookieNode)[O0QQ('‮6','&4&p')](QOQQQ=>{cookiesArr[O0QQ('‫7','X&Nn')](jdCookieNode[QOQQQ]);});if(process[O0QQ('‫8','Ol1#')][O0QQ('‮9','nqdP')]&&process[O0QQ('‮a','23uU')]['JD_DEBUG']===O0QQ('‫b','Ol1#'))console['log']=()=>{};}else{cookiesArr=[$[O0QQ('‫c','o2Oi')](O0QQ('‮d','7Qh(')),$[O0QQ('‫e','86x4')](O0QQ('‫f','CsbU')),...jsonParse($[O0QQ('‫10','wS7z')](O0QQ('‫11','Era2'))||'[]')[O0QQ('‫12',']Hoz')](QQOOQ=>QQOOQ[O0QQ('‫13','26PH')])][O0QQ('‮14','M7(Q')](QO0Q0=>!!QO0Q0);}let activityId=O0QQ('‫15','X&Nn');let time=Date[O0QQ('‫16','Gqb1')]();let allMessage='';!(async()=>{var QOQQO={'OOQO':O0QQ('‮17','wTwW'),'OOOO':'CookieJD','QQQQ':O0QQ('‮18','6fBa'),'O0O0':'CookiesJD','OQOO':function(QOQ0Q,OQQO0){return QOQ0Q==OQQO0;},'OOOQ':'string','Q0QO':O0QQ('‫19','!B%H'),'Q0QQ':O0QQ('‮1a','2F@A'),'OOQ0':O0QQ('‫1b','ZZJ1'),'Q00O':O0QQ('‮1c','PWuA'),'O0QO0':function(OOOQ0,OOO00){return OOOQ0<OOO00;},'QOOOQ':function(QQOOO,Q0OQQ){return QQOOO===Q0OQQ;},'QQO0Q':O0QQ('‫1d','Gqb1'),'QOOOO':O0QQ('‫1e','9#AQ'),'OO00Q':function(Q0O0Q,O00OQ){return Q0O0Q(O00OQ);},'OO0QQ':function(O0QQ0,O0QOO){return O0QQ0+O0QOO;},'OOOO0':function(O0QOQ,QO0QQ){return O0QOQ!==QO0QQ;},'OO00O':O0QQ('‮1f','[c(c'),'OQO00':function(QOOO0,QO00Q){return QOOO0===QO00Q;},'OQOQ0':O0QQ('‫20','23uU'),'OO0QO':function(QO0QO){return QO0QO();}};if(!cookiesArr[0x0]){if(QOQQO[O0QQ('‫21','u9jj')]!=='QQ0O'){console['log'](e);console['log'](O0QQ('‮22','7Qh('));return![];}else{$[O0QQ('‫23','wTwW')]($['name'],QOQQO['OOQ0'],QOQQO[O0QQ('‮24','Era2')],{'open-url':O0QQ('‮25','nqdP')});return;}}for(let OOOOQ=0x0;QOQQO[O0QQ('‫26','Ztuz')](OOOOQ,cookiesArr[O0QQ('‮27','C$XI')]);OOOOQ++){if(cookiesArr[OOOOQ]){if(QOQQO[O0QQ('‫28','ia($')](QOQQO[O0QQ('‮29','5@8i')],QOQQO[O0QQ('‮2a','2F@A')])){if(err){console['log'](err);}else{$['backEnd']=data[O0QQ('‮2b','26PH')](/"backEnd":"(.+?)"/);if($[O0QQ('‮2c','2F@A')]){$[O0QQ('‮2d','V!OA')]=$['backEnd'][0x1];}console[O0QQ('‫2e',']FEk')](QOQQO['OOQO']+$['backEnd']);}}else{cookie=cookiesArr[OOOOQ];$[O0QQ('‫2f','qtkH')]=QOQQO[O0QQ('‫30','!*R2')](decodeURIComponent,cookie[O0QQ('‮2b','26PH')](/pt_pin=([^; ]+)(?=;?)/)&&cookie[O0QQ('‮31','86x4')](/pt_pin=([^; ]+)(?=;?)/)[0x1]);$[O0QQ('‮32','aQjL')]=QOQQO[O0QQ('‫33','ia($')](OOOOQ,0x1);$[O0QQ('‮34','u9jj')]=!![];$[O0QQ('‮35','Ujc8')]='';message='';console[O0QQ('‫36','Ujc8')](O0QQ('‫37','9#AQ')+$[O0QQ('‫38','C&$C')]+'】'+($[O0QQ('‮39','qtkH')]||$['UserName'])+'*********\x0a');if(!$['isLogin']){if(QOQQO[O0QQ('‮3a','&4&p')](QOQQO[O0QQ('‫3b','!B%H')],'QO0O')){$[O0QQ('‫3c','l1N8')]($[O0QQ('‫3d','wS7z')],'【提示】cookie已失效',O0QQ('‮3e','CsbU')+$['index']+'\x20'+($[O0QQ('‫3f','7gJ]')]||$[O0QQ('‫40','86x4')])+'\x0a请重新登录获取\x0ahttps://bean.m.jd.com/bean/signIndex.action',{'open-url':O0QQ('‫41','ia($')});if($['isNode']()){if(QOQQO['OQO00'](O0QQ('‫42','6fBa'),QOQQO['OQOQ0'])){cookiesArr=[$['getdata'](QOQQO['OOOO']),$[O0QQ('‫43','!o4(')](QOQQO['QQQQ']),...jsonParse($[O0QQ('‫44','Ol1#')](QOQQO[O0QQ('‫45','g8NI')])||'[]')['map'](O00Q=>O00Q['cookie'])][O0QQ('‫46','26PH')](QQ00=>!!QQ00);}else{await notify[O0QQ('‫47','Ztuz')]($[O0QQ('‮48','Era2')]+'cookie已失效\x20-\x20'+$[O0QQ('‮49','Z81N')],O0QQ('‮4a','86x4')+$[O0QQ('‫4b','cHeT')]+'\x20'+$['UserName']+O0QQ('‫4c','8q3t'));}}continue;}else{if(QOQQO[O0QQ('‮4d','!*R2')](typeof str,QOQQO[O0QQ('‫4e','6fBa')])){try{return JSON['parse'](str);}catch(OQOQO){console[O0QQ('‮4f','6fBa')](OQOQO);$['msg']($['name'],'',QOQQO[O0QQ('‮50','7Qh(')]);return[];}}}}await QOQQO[O0QQ('‮51','wTwW')](main);await $['wait'](0x7d0);}}}if(allMessage){if($[O0QQ('‫52','cHeT')]())await notify[O0QQ('‮53','5@8i')](''+$['name'],''+allMessage);$[O0QQ('‮54','qtkH')]($[O0QQ('‫55','!o4(')],'',allMessage);}})()[O0QQ('‮56','qtkH')](QQOQ0=>{$[O0QQ('‮57','V!OA')]('','❌\x20'+$[O0QQ('‮58','cHeT')]+O0QQ('‫59','Tuqx')+QQOQ0+'!','');})[O0QQ('‫5a','Era2')](()=>{$['done']();});async function main(){var Q0QO0={'Q0QOO':'3|2|4|0|1','QQQO0':function(O00O0){return O00O0();}};var O0Q0QO=Q0QO0['Q0QOO']['split']('|'),O0Q00O=0x0;while(!![]){switch(O0Q0QO[O0Q00O++]){case'0':await $[O0QQ('‮5b','!B%H')](0x1f4);continue;case'1':await draw_activetemporary();continue;case'2':await $[O0QQ('‫5c','D6D(')](0x1f4);continue;case'3':await Q0QO0[O0QQ('‫5d','Ol1#')](query_tempactivconfig);continue;case'4':await query_activetemporary();continue;}break;}}function query_tempactivconfig(){var O00OOQ={'O0O0Q':function(QOO00O,QOO0QQ){return QOO00O==QOO0QQ;},'QQQOQ':O0QQ('‫5e','u9jj'),'QOO0Q':function(QOOOO0,O00OOO){return QOOOO0!==O00OOO;},'QOO0O':O0QQ('‮5f','&4&p'),'QQQOO':function(QOO0QO,QQQO0Q){return QOO0QO!==QQQO0Q;},'QOOQQ':O0QQ('‫60','7Qh('),'QQ0O0':O0QQ('‮61','0smW'),'OO0OO':O0QQ('‫62','V!OA'),'OOQQ0':'zh-cn'};return new Promise(async QQQOQQ=>{var QQQO0O={'QOO00':function(QQQOQO,O00OQ0){return O00OOQ[O0QQ('‮63','c5x%')](QQQOQO,O00OQ0);},'OOQ0Q':O00OOQ['QQQOQ'],'OQOOQ':function(QOOQQQ,QOOQ0Q){return O00OOQ[O0QQ('‫64','!o4(')](QOOQQQ,QOOQ0Q);},'OOQQO':'O0Q0','OO0Q0':O00OOQ[O0QQ('‮65','qtkH')],'OQOOO':function(O0QQQQ,O0Q000){return O0QQQQ+O0Q000;},'Q00OQ':'领取ID：','Q00OO':function(O0QQ0O,O0QQ0Q){return O00OOQ[O0QQ('‮66','[c(c')](O0QQ0O,O0QQ0Q);},'O0OQO':O00OOQ['QOOQQ'],'O0O0O':O0QQ('‮67','5@8i'),'Q0QQ0':function(O0QOOO,QOO0Q0){return O0QOOO||QOO0Q0;}};if(O00OOQ[O0QQ('‫68',']FEk')](O0QQ('‮69','7Qh('),O00OOQ[O0QQ('‮6a','!*R2')])){const QOOQQO={'url':O0QQ('‮6b','o2Oi')+activityId+'&_='+time+O0QQ('‫6c',']Hoz'),'headers':{'Accept':O0QQ('‮6d','ZZJ1'),'Accept-Encoding':O00OOQ[O0QQ('‮6e','Ujc8')],'Accept-Language':O00OOQ[O0QQ('‮6f','C$XI')],'Connection':O0QQ('‫70','X&Nn'),'Cookie':cookie,'Host':O0QQ('‫71','wS7z'),'Referer':O0QQ('‮72','C&$C')+activityId+O0QQ('‮73','D6D(')+time+O0QQ('‫74','c5x%'),'User-Agent':O0QQ('‮75','23uU')}};$['get'](QOOQQO,(QOOQ0O,QOO000,O00O00)=>{if('OOQQ'!==O0QQ('‮76','6fBa')){if(QQQO0O[O0QQ('‫77','Era2')](typeof JSON['parse'](O00O00),QQQO0O[O0QQ('‫78','D6D(')])){return!![];}}else{try{if(QOOQ0O){if(QQQO0O[O0QQ('‫79','kHkO')](QQQO0O[O0QQ('‮7a','!*R2')],QQQO0O['OO0Q0'])){console[O0QQ('‮7b','C$XI')](QOOQ0O);}else{console[O0QQ('‫7c','Gqb1')](''+JSON[O0QQ('‫7d','qtkH')](QOOQ0O));console[O0QQ('‫7e','o2Oi')]($[O0QQ('‫7f','2F@A')]+'\x20API请求失败，请检查网路重试');}}else{$[O0QQ('‫80','qtkH')]=O00O00[O0QQ('‮81','ZZJ1')](/"backEnd":"(.+?)"/);if($['backEnd']){$[O0QQ('‫82','M7(Q')]=$[O0QQ('‮83','ZZJ1')][0x1];}console['log'](QQQO0O[O0QQ('‫84','C&$C')](QQQO0O['Q00OQ'],$[O0QQ('‮83','ZZJ1')]));}}catch(QOOQ00){if(QQQO0O[O0QQ('‫85','8q3t')](QQQO0O[O0QQ('‫86','wTwW')],QQQO0O['O0O0O'])){$['logErr'](QOOQ00,QOO000);}else{$[O0QQ('‮87','[c(c')](QOOQ00,QOO000);}}finally{QQQOQQ(QQQO0O[O0QQ('‮88','M7(Q')](O00O00,{}));}}});}else{$[O0QQ('‫89',']FEk')]=$[O0QQ('‮8a','aQjL')];}});}function query_activetemporary(){var O0Q00Q={'Q00Q0':function(O0QOO0,O0QO00){return O0QOO0===O0QO00;},'Q0QQO':function(O0QOQ0,QOOO00){return O0QOQ0(QOOO00);},'O0OQ0':function(QOQQO0,QO0QOQ){return QOQQO0||QO0QOQ;},'Q0Q0O':O0QQ('‮8b','Era2'),'Q0QQQ':O0QQ('‮8c','qtkH'),'O0O00':O0QQ('‮8d','5@8i'),'Q0Q0Q':O0QQ('‫8e','Gqb1')};return new Promise(async O00OQQ=>{var O00O0Q={'OQ00Q':function(QOOOQ0,QQQOOO){return O0Q00Q['Q00Q0'](QOOOQ0,QQQOOO);},'OQOO0':'QQOO','OQ0QO':O0QQ('‮8f','C&$C'),'OQ00O':function(QQQ00Q,QO00OO){return O0Q00Q[O0QQ('‫90','Ztuz')](QQQ00Q,QO00OO);},'QOOQO':function(QO0QQ0,QOOOOQ){return O0Q00Q['O0OQ0'](QO0QQ0,QOOOOQ);}};const QO0Q00={'url':'https://wq.jd.com/activet2/looktreasure/query_activetemporary?sceneval=2&backendId='+$[O0QQ('‮91','nqdP')]+O0QQ('‫92','0smW')+time+'&sceneval=2&g_login_type=1&callback=query_activetemporary&g_ty=ls&appCode=msc588d6d5','headers':{'Accept':O0Q00Q[O0QQ('‫93','6fBa')],'Accept-Encoding':'gzip,\x20deflate,\x20br','Accept-Language':O0Q00Q[O0QQ('‮94','X&Nn')],'Connection':O0Q00Q[O0QQ('‮95','aQjL')],'Cookie':cookie,'Host':'wq.jd.com','Referer':O0QQ('‫96','M7(Q')+$['backEnd']+'&_='+time+O0QQ('‫97','u9jj'),'User-Agent':O0Q00Q['Q0Q0Q']}};$['get'](QO0Q00,(O0QOOQ,QQ0OQO,QQ0O0O)=>{try{if(O00O0Q['OQ00Q'](O00O0Q['OQOO0'],O00O0Q['OQ0QO'])){console[O0QQ('‫98','kHkO')](O0QOOQ);}else{if(O0QOOQ){console[O0QQ('‮99','ZZJ1')](O0QOOQ);}else{$['sPrizeDesc']=QQ0O0O[O0QQ('‫9a','V!OA')](/"sPrizeDesc":"(.+?)"/);if($[O0QQ('‫9b','Era2')]){$['sPrizeDesc']=$['sPrizeDesc'][0x1];console['log'](O0QQ('‮9c','6fBa')+$[O0QQ('‮9d','23uU')]);}}}}catch(O0QOQO){$[O0QQ('‮87','[c(c')](O0QOQO,QQ0OQO);}finally{O00O0Q['OQ00O'](O00OQQ,O00O0Q[O0QQ('‮9e','Ztuz')](QQ0O0O,{}));}});});}function draw_activetemporary(){var QQ0O0Q={'OQQ0Q':function(O0QOQQ){return O0QOQQ();},'OOQOO':'OQQQ','OQ000':O0QQ('‫9f',']Hoz'),'OQQQQ':O0QQ('‮a0','ZZJ1'),'OQQ0O':O0QQ('‮a1','PWuA'),'OQQQO':O0QQ('‫a2','7Qh('),'OQ0Q0':O0QQ('‮a3','wTwW'),'Q000Q':'keep-alive','Q00QQ':O0QQ('‫a4','u9jj')};return new Promise(async O0QO0O=>{var QOOOOO={'QQ0OQ':function(QO0QO0){return QQ0O0Q[O0QQ('‫a5','M7(Q')](QO0QO0);},'QQQ00':function(QQQO00,QQQOQ0){return QQQO00!==QQQOQ0;},'QQQQ0':QQ0O0Q[O0QQ('‮a6','9#AQ')],'OO0O0':QQ0O0Q[O0QQ('‫a7','C$XI')]};if(QQ0O0Q[O0QQ('‫a8','!o4(')]!==QQ0O0Q[O0QQ('‮a9','o2Oi')]){const QQQOOQ={'url':'https://wq.jd.com/activet2/looktreasure/draw_activetemporary?sceneval=2&backendId='+$[O0QQ('‫aa','!*R2')]+O0QQ('‮ab','v^Yb')+time+'&sceneval=2&g_login_type=1&callback=draw_activetemporary&g_ty=ls&appCode=msc588d6d5','headers':{'Accept':O0QQ('‫ac','CsbU'),'Accept-Encoding':QQ0O0Q[O0QQ('‫ad','ZZJ1')],'Accept-Language':QQ0O0Q[O0QQ('‫ae','8q3t')],'Connection':QQ0O0Q[O0QQ('‮af','!*R2')],'Cookie':cookie,'Host':O0QQ('‮b0','FpIT'),'Referer':'https://wq.jd.com/activet2/looktreasure/draw_activetemporary?sceneval=2&backendId='+$[O0QQ('‫b1','5@8i')]+O0QQ('‮b2','o2Oi')+time+O0QQ('‮b3','6fBa'),'User-Agent':QQ0O0Q['Q00QQ']}};$['get'](QQQOOQ,(QOO00Q,QO0QOO,QO00O0)=>{if(QOOOOO[O0QQ('‫b4','nqdP')](QOOOOO['QQQQ0'],QOOOOO['OO0O0'])){try{if(QOO00Q){console['log'](QOO00Q);}else{}}catch(QQ0OO0){$[O0QQ('‮b5','M7(Q')](QQ0OO0,QO0QOO);}finally{O0QO0O(QO00O0||{});}}else{QOOOOO[O0QQ('‮b6','Ol1#')](O0QO0O);}});}else{console[O0QQ('‫b7','&4&p')](err);}});}function TotalBean(){var O00QOO={'QO0OO':function(QQQQQO,O000O0){return QQQQQO+O000O0;},'QOQQ0':O0QQ('‫b8','v^Yb'),'QOQ00':function(QQQQ0O,QQQ000){return QQQQ0O!==QQQ000;},'QQ00Q':O0QQ('‫b9','2F@A'),'QQOO0':function(QQQ0Q0,O00QOQ){return QQQ0Q0===O00QOQ;},'QQ0QQ':function(QQQ0OQ,QQQQ00){return QQQ0OQ===QQQQ00;},'OOO0Q':O0QQ('‫ba','wS7z'),'QO0OQ':O0QQ('‫bb','l1N8'),'OQQOQ':O0QQ('‫bc','!B%H'),'OQQOO':function(O0OOOO,O0OOOQ){return O0OOOO===O0OOOQ;},'OOO0O':function(QQ0OOO){return QQ0OOO();},'OQ0O0':O0QQ('‮bd','Gqb1'),'OOOQQ':'gzip,\x20deflate,\x20br','OOOQO':'zh-cn','QQ0QO':'https://wqs.jd.com/my/jingdou/my.shtml?sceneval=2','QQ00O':function(Q0OQO0,QQ0OOQ){return Q0OQO0(QQ0OOQ);},'Q0O00':'JDUA','O0QQO':O0QQ('‫be','X&Nn')};return new Promise(async O0OOQO=>{var O00Q00={'QQ000':'请勿随意在BoxJs输入框修改内容\x0a建议通过脚本去获取cookie','OQ0OQ':function(O000OO,O000OQ){return O00QOO[O0QQ('‫bf','5@8i')](O000OO,O000OQ);},'QOQOQ':O00QOO[O0QQ('‫c0','Ztuz')],'OQ0OO':function(O00QQ0,QQQ0QQ){return O00QQ0+QQQ0QQ;},'OQQ00':function(QQQOO0,QQQ00O){return O00QOO[O0QQ('‮c1','26PH')](QQQOO0,QQQ00O);},'OQQQ0':function(QQQ0QO,QQQQQQ){return QQQ0QO!==QQQQQQ;},'QQQQO':O00QOO[O0QQ('‫c2','Ztuz')],'QQ0Q0':function(QQQQ0Q,O0OOQ0){return O00QOO['QQOO0'](QQQQ0Q,O0OOQ0);},'Q0OOO':'OO00','Q0OOQ':function(O0OO00,QQ0OQ0){return O00QOO[O0QQ('‫c3','Z81N')](O0OO00,QQ0OQ0);},'O000Q':O00QOO[O0QQ('‫c4','C&$C')],'O0OO0':O00QOO[O0QQ('‮c5','Ol1#')],'O0000':O00QOO[O0QQ('‮c6','Ztuz')],'O0QQQ':O0QQ('‮c7','V!OA'),'O0Q0Q':function(O0QQO0,QQ0O00){return O00QOO[O0QQ('‮c8','Ol1#')](O0QQO0,QQ0O00);},'O00Q0':function(Q0O0O0){return O00QOO[O0QQ('‫c9','9#AQ')](Q0O0O0);}};const Q0OQOQ={'url':O0QQ('‮ca','C&$C'),'headers':{'Accept':'application/json,text/plain,\x20*/*','Content-Type':O00QOO[O0QQ('‫cb','D6D(')],'Accept-Encoding':O00QOO[O0QQ('‫cc','g8NI')],'Accept-Language':O00QOO['OOOQO'],'Connection':O0QQ('‫cd','&4&p'),'Cookie':cookie,'Referer':O00QOO[O0QQ('‮ce','aQjL')],'User-Agent':$[O0QQ('‮cf','Era2')]()?process[O0QQ('‫d0','wS7z')][O0QQ('‫d1','Era2')]?process[O0QQ('‮d2','CsbU')][O0QQ('‮d3','c9D$')]:O00QOO['QQ00O'](require,O0QQ('‫d4','26PH'))[O0QQ('‫d5','PWuA')]:$[O0QQ('‮d6','23uU')](O0QQ('‫d7','c5x%'))?$[O0QQ('‮d8','ZZJ1')](O00QOO['Q0O00']):O00QOO['O0QQO']}};$[O0QQ('‫d9','&4&p')](Q0OQOQ,(Q0OQOO,QQ0Q00,QQ00OO)=>{var QQ0QQ0={'O00QQ':function(QQ00OQ,O00000){return O00Q00[O0QQ('‮da','ZZJ1')](QQ00OQ,O00000);},'O000O':O00Q00[O0QQ('‫db','26PH')],'QQQ0Q':O0QQ('‫dc','c9D$'),'QO0O0':function(O00QQQ,QOOQQ0){return O00Q00[O0QQ('‫dd','ia($')](O00QQQ,QOOQQ0);}};if(O00Q00[O0QQ('‮de','wS7z')](O0QQ('‫df','9#AQ'),O0QQ('‮e0',']Hoz'))){$['done']();}else{try{if(Q0OQOO){if(O00Q00['OQQQ0'](O00Q00[O0QQ('‫e1','nqdP')],O00Q00[O0QQ('‮e2','!B%H')])){$[O0QQ('‮e3','FpIT')]=QQ00OO['match'](/"backEnd":"(.+?)"/);if($[O0QQ('‮e4','cHeT')]){$[O0QQ('‮e5','Era2')]=$[O0QQ('‮83','ZZJ1')][0x1];}console[O0QQ('‮99','ZZJ1')](QQ0QQ0['O00QQ'](QQ0QQ0[O0QQ('‮e6','qtkH')],$['backEnd']));}else{console['log'](''+JSON[O0QQ('‫e7','ia($')](Q0OQOO));console[O0QQ('‮e8','23uU')]($[O0QQ('‮e9','26PH')]+O0QQ('‮ea','Era2'));}}else{if(QQ00OO){if(O00Q00[O0QQ('‫eb',']Hoz')](O00Q00[O0QQ('‮ec','X&Nn')],O00Q00['Q0OOO'])){QQ00OO=JSON[O0QQ('‫ed','l1N8')](QQ00OO);if(O00Q00[O0QQ('‮ee','cHeT')](QQ00OO[O00Q00[O0QQ('‮ef','D6D(')]],0xd)){if(O00Q00[O0QQ('‫f0','wTwW')](O00Q00[O0QQ('‫f1','cHeT')],O0QQ('‫f2','o2Oi'))){$[O0QQ('‮f3','V!OA')]=![];return;}else{$[O0QQ('‮f4','!o4(')]=QQ00OO[O0QQ('‮f5','Era2')](/"sPrizeDesc":"(.+?)"/);if($[O0QQ('‫f6','ia($')]){$[O0QQ('‮f7','M7(Q')]=$[O0QQ('‮f8','6fBa')][0x1];console['log'](QQ0QQ0[O0QQ('‮f9','X&Nn')](QQ0QQ0[O0QQ('‫fa','C&$C')],$[O0QQ('‫fb','o2Oi')]));}}}if(QQ00OO[O00Q00['O000Q']]===0x0){$[O0QQ('‮fc','C&$C')]=QQ00OO[O0QQ('‫fd','cHeT')]&&QQ00OO[O00Q00[O0QQ('‫fe','l1N8')]][O0QQ('‫ff','Z81N')]||$['UserName'];}else{if(O0QQ('‮100','&4&p')!==O00Q00[O0QQ('‫101','C$XI')]){$[O0QQ('‫102','23uU')]=$[O0QQ('‮103','wS7z')];}else{$['sPrizeDesc']=$[O0QQ('‮f4','!o4(')][0x1];console[O0QQ('‫7c','Gqb1')](QQ0QQ0[O0QQ('‮104','ZZJ1')](QQ0QQ0[O0QQ('‫105','7gJ]')],$[O0QQ('‮f8','6fBa')]));}}}else{console[O0QQ('‫106','Tuqx')](e);$[O0QQ('‫107','cHeT')]($[O0QQ('‫108','Ol1#')],'',O00Q00[O0QQ('‫109','86x4')]);return[];}}else{console['log'](O0QQ('‫10a','ZZJ1'));}}}catch(QQOO0O){$[O0QQ('‮10b','c9D$')](QQOO0O,QQ0Q00);}finally{if(O00Q00[O0QQ('‮10c','8q3t')](O0QQ('‮10d','M7(Q'),O0QQ('‫10e','C&$C'))){O00Q00[O0QQ('‫10f','!o4(')](O0OOQO);}else{console[O0QQ('‫98','kHkO')](Q0OQOO);}}}});});}function safeGet(QQOO00){var QOOQOQ={'O0Q00':function(QQQQO0,QOOQOO){return QQQQO0==QOOQOO;},'Q0OQO':O0QQ('‫110','g8NI')};try{if(QOOQOQ[O0QQ('‫111','8q3t')](typeof JSON[O0QQ('‮112','9#AQ')](QQOO00),QOOQOQ[O0QQ('‫113','nqdP')])){return!![];}}catch(QOO0O0){console['log'](QOO0O0);console[O0QQ('‫7c','Gqb1')](O0QQ('‫114','[c(c'));return![];}}function jsonParse(O000QO){var O0QQOO={'QO000':function(O0OO0O,O0Q0O0){return O0OO0O==O0Q0O0;},'QOQ0O':O0QQ('‮115','aQjL')};if(O0QQOO[O0QQ('‫116','M7(Q')](typeof O000QO,O0QQOO[O0QQ('‮117','C$XI')])){try{return JSON[O0QQ('‮118','2F@A')](O000QO);}catch(O0OOQQ){console[O0QQ('‮119','qtkH')](O0OOQQ);$['msg']($[O0QQ('‫11a','9#AQ')],'','请勿随意在BoxJs输入框修改内容\x0a建议通过脚本去获取cookie');return[];}}};OＯ0$='jsjiami.com.v6';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }