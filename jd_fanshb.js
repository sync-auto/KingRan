/*
粉丝福利红包一次性
cron:49 11,12 7 9 *
============Quantumultx===============
[task_local]
#粉丝福利红包一次性
49 11,12 7 9 * jd_fanshb.js, tag=粉丝福利红包一次性, enabled=true
 */

const $ = new Env('粉丝福利红包一次性');
var OＯ0$='jsjiami.com.v6',OＯ0$_=['‮OＯ0$'],O00O=[OＯ0$,'A1rDng==','O8OtKcOZw7jDg8OWJ8KHLsK+wqU1aCHCpsOzLWpyworDiFfCjMOiHMORCMOSQFTDjWjDm8K9PT3Dl3YWw61Swq3DusOCZsOBayfDr8KZGcKCHxdsw7dew4xww7bDnDjDoVscw6jCkcKEw505w6PDujnDgT9cOsKAw4FcwpHCvGkZw5dIwq0uwrDDsDpiw7jDtcO5AcKcS8K2w43CvBfClw7DrsO6wqvDnlrDv8Knwo3CqkoSF3PCkTHCpcO5Z8OlVHAgNXZ1wo3DiHB1w5jChsKv','wrdywpU=','w63CrWRw','WmonUgc=','w5nDi0UONQ==','w6NCe2zDjg==','w6PCp18rw5k=','JsO4Uw==','wrnDsyLCoMKg','KcOVwpwBw7rDqEMG','wqDCmMOWO8KPwrXDrcKl','w6nCvcKuH8Oz','w6tGw6PDgsO3wqdy','w4Brw5ZDEw==','eWhqSjfDqDQ=','wonCogTCncKewopE','wp1wwqI=','MsOgwpXCuMOM','YcOVaWzCrsO5cj3CoDM=','wrg0Uw==','5a6q77y76I6L5b2s77+r','ZzUR','w7BZRsKZdQ==','WsOnOMOq','VELCosO8','woTChAdawrg5w6E=','JcOdwpwBw5HDp0o=','w5TCncKGasKxLQ==','VD3Dg8Kd','AcKxwqfCnMOYwrDCtg==','w54dTQ==','fRPCn8K/Tg==','5ayl776r6Iyj5byW772V','w4YXwrDCmQ==','KMK4bA==','PxVJwrrDrQ==','UnTDjVbDjcK9wp7DncKb','Y2TDlsOCwoc=','SnLCj0rClA==','w57DvEZEVA==','w73DmF8rw5k=','w6NCexPDjg==','ScOhJU0=','wrJ2woIFw6rChBc=','w7nCgcOb','ScKeOyzCjg==','YxvDiMKjwpk=','BcKne8K/w5U=','woEnw5E/w6A=','O8KBEsK/Ag==','wrwvQGjDqWnDsEnDk1rDgxLCqjbDj8KKwo8ww6nDqMO0TQkJG8OiDMOYQVfCjMOHwopECC56chR2woBDY8OtHRfDqx1gw5PCu3IVw5/DmcOqwrjCrMO3ZsK/wpBJf2low6nDrMKgw6zDnFnChSBRb3McOsO5Yh1j','w4DClgdUwpMyw7Mvw4XDj8OZw57CpsKDw4IrScKowoR4WcOJQcKUwrIKwpYcLTPDi1Iuw6EoKGDClh8Iw5fClcOnw6TClirDoMO2MCPCiDrDncKAwqpfUl5Gwq/ClCVFUMOMXMKKwoVFOh4Kd8OywrnCuC8cN3TDicKZw65o','XsKCwoMyw48=','Y8K8w5Q=','wrPDhHRMMjPCpwTDtMOy','LMKfw7TCuMOM','w4jDljzCuBM=','ecOgYnY=','fS3DjT/DhX59','WMOBREHCkcOeYx8=','woUUeyjDiw==','w53DicOi','wrrCjCjDhsKU','w6VIw6c=','wrfDjjUrdVgVw77DpBc=','wqzCjsKUwr/ClQzChMKVw5rCgw==','w4Flw4U=','wqNHwpMHw5XCjzcaw4vCiw==','w57Ch3c/wpvDsw==','wpDCj8OWw6bCvg==','w7vCqwcof29WSz3Dnw==','wpvDnRnCjMO4','w55aw5BJAcOGwpfDoMKcYQ==','w4vDt8Omw6g1wrc6UsK+w7w=','fsOqfA==','cx3ChcO6wqI=','w57CnVha','wqTCpMO8GA==','XU7DkcKawrnDqMKFD3BwK8OGw4ZPfkjCug==','YRrDnsKvRQ==','LEwOwpRcw6DDhCEZUA==','w57DvCclVA==','f8Kmw4AV','L10fwpQCwrvCh2cYRMO/XAJyw43DosObw69lKjvCiSF/woQLPWrCn2M5wrzCkVFjwpHCiRBww40ywpnDnizCpMK7bwMmwrLCtcOow6TCnsKuIsKtd3rClsOkwofClm3DtMOjwoPDhsKlwq4Qfk1GGW3DnGnCkCbDtsOb','VVZfwpDCtGJI','PR3Cgg==','wpTCm3MfwofDpBjDvl5bTMKGCMKlwqByw4LCuiLDqMKpw4HCkMKPbsOUworDt8KfwpI6WnAnasOswpfDtcKtwpFtwo/CosKGWA5Cw5gTwq3DjmPCsMKywq1aZcKrRUDCtcOAw79NwqZMKsKrRsOzaQoPdTjDjMKXdcOPcsKcKEk=','wpQtFw==','w7Avw6PDqcOFwr7Cim3ChsOpb8OIwpXCpsOZw4Blw4wgw6RPIhF0JsOXw5zDucKKAsKTw7dzwpPCscOtw6wJFVzDksKAYMOfGFFqwp7DjhRKw4XCiyZRw4UKGcO3wqFyw4LDosK4QHRkecKoZ8Kcw5vDiA/DhQnCuhYKwqZJPis=','IEwf','JcKjwqnDscKr','QMKcw6Iyw48=','wqTCklfDhsOr','E8KxwrbChMO4','IcONIA==','IMORIA==','dx3ClMKJWVE=','6aK05Y+9w5DDl++/kg==','OMOyQMKTw6vCkMOy','wpkNw5HDnQ==','WFXDi8KP','wqXDrjcuZl4ww6/DvhtNw4dfA8OIQWNTwpvCiMO+fUkFAcOkw74aKwZ6wq3Djw==','YnBjwoPDnhl8w51gwr9CTzEWRDvCsA==','w5diwo9DFQ==','wqw9Igx1w6XDqgTCpsOeCnXDig==','WMOBTkQ=','6KyK5YmS6Zi55oev5Z6RwqLCq8ONfsOA6L2R5YaE5qOT5L2x5pag5YaF5a6hwonluIDor6XpgYXovJzohormn6jljbvojL3lj5TChgsSHAbCtg==','w6/DrXjChzEUwozCtDnDtsKyIlHDtinDmgRew5dnNAbDr03CiMOewqzCoQLCtDgFST3DucKzPhPDr19dfUXCqGIfw5Jdwop3wodXw5Jo','LMOgw7TDh8Kt','w4jCqV3CphM=','ZMK2w5YNwq3CvmcyH0U=','XsKZwrt2woY=','Yik4cjJ4','fXNjwq7Cokl+clHDksOecnQ=','w4QHAA==','wqzCoTtkwq4Sw5cRw6jCtcKuwrbClQ==','Sjo6wqLDgg==','V8OEA8OuVsKsSTXDusOX','wrdywpUKw47CnhI=','w7/Co2Rh','JcK9wqnCjsOK','XsKcw6JN','wqcvRnHDtDTCtgDDnQ==','wpfDrMOh','dWhkRA==','SsKRcsK56K6k5rKz5aeJ6LaC776C6K+z5qOa5p2f576N6LWZ6YSJ6K++','w51rw5BTHg==','wrTDksOXwrDDjQ==','AsOzFgVa','w5NDJg5/','O8KjwqnCkMK1','XkRwwpTClmVC','QMKCw6IswrA=','RAsnLWY=','FsOtw487wqQ=','YkRZwonCv21BSA==','w5zCgXMRwqfDoAPDug==','TgHClsK+ZUJKwpM=','wpHDgsOR','5Lq95Lq15p+n5Yun5Zq/6L+i5Zur56q35pW35o+f','RMKGOMOq','wofCrADCs8KpwpY=','GsOtNA==','KA4D','wpjDnQDCig==','YxvDlsOcwoc=','KMO2V8Kbw4HCmsOz','KsOdwosJw7w=','w5ATSUjDhMKnYg==','wofCrAA=','a2XDqcK7w4Q=','wqAvw7Uu','AsOtd2Q=','AsOzFhs7','QMO4w5p2woY=','wrTDvzUxag==','w4Zow4/CmcO9','w4DCnUYl','wpXDj3dyXg==','w4jDhsOmw7Iq','wrPCscKB','w659EA==','ZmrCjFfDgMO2wrfDtg==','BMOTwpABw73DrGQnAA==','OcKyHMOh','w7fDgsKuYA==','w4jDiDzDhw==','6KyM5Ym86ZiJ5oaP5Z+Vw5jCmybCrkXovLvlhbnmorHkvqXml4vlh5Llr7jCgeW7gOitp+mBi+i+reiGlOaesOWOj+iMk+WPt8Knw5HDu3A6PA==','dQTDqcK7w5o=','wpjCtxXCn8K1woM=','wo/CpFcVBw==','wqPDuzMmbkkw','wr5Qwoouw7M=','XsKCwoMsw48=','wpZ6wrEbw50lwrI=','w5XCk8KR','wrzCscKJwr3Chgw=','wrLCncKGwq/Dtg==','wp8nwrBewp8=','wo3DjMOEwpPDnA==','wpnChMOU','wro6WX0=','GsKtwrrDpsOGVcO8ByE+w4PCpQ==','w7HDscKMwrLCrAbCr8Kbw4DChSkWw68=','eMOawqQpwrNT','LsOQPiQewo/DusO5OQ==','I8OkesKfw6DCkQ==','wqBiwpIG','IsOSwok=','cHDDp8Kuw5DCisK0LQ==','wpd+wqkMw5k=','aWVt','w5UXXkfDoMK9Zw==','w7EdRUjDqMKsTFrCtw==','wprDiMOCwoTDmMKUwqU=','UsOGwoUtwr5TRsKHQw==','US3DhQ==','eB3CnMKnQkY=','wpvDhMOawpTDnMKS','w6nDtns=','5ay8772l6I+B5b2B772f','44Or5o2T56a844KR6KyK5YeS6I2D5Y6I5LmI5Liq6LaO5Y+r5Lu3KMKdOCrDol/Dg+eapeaPj+S/seeWtHrDi0PCvcO6w7Xnmp/ku7/kuYXnrYXlibLojZnlj6A=','VDjDgcObwp7CjcOPWcO7LQRDwqZDwqDCty5+wq/DncOvw7whw63Cj18eJF1swpVpwoAPNMKFCkrDiFHCgnEM','wqAvw7VP','f8O2fA==','w4Nrw49F','wqjDoHJVO2zDjE7DpcO0woXDpAdaYhjCoMKqGMOaYcKlw4F9wp7CgMOUHWTDiMOMw65mw5/DhB4Fw6g5CnNXLw==','GcKiworCqMKATMOvTcO/wps=','w6rDuHjClCo=','OcOHRsKZw77CkcOTGMOaGQ==','NHkZwo0Lw6TDrC0cVg==','aBLDjRPDnnhRw75Kw5Y=','WMOtwq4=','EloOwpY/w6DDhS0=','akrCrG0=','KBwQwrrDqw==','wrs9w7TDr8OD','b8OdOHPDmVLDtQ==','w6HCpXR+VRMfwoE=','TcKWw5VAwr7CowTlvaPlp7njgLnkuIbkuYLot4jljIw=','a8O5IsOZcQ==','WV5fwpDCv21BSA==','w6fCm3UIwqfDoAPDug==','wqXDpj0/MVhYw44Xw6Q=','wp/DjyHCgMO3TCY=','UT/Dkg==','44CC5o2V56Sh44CUwrfDs1kzwro15bet5aeC5pS9','5LqQ5LmQ6LaT5Y2c','BMKbwpvCqsK0SMOGTQ==','EsOPwpoYw5rDqEMG','aeisp+mEieaVh+ebpuW+i+iNpeWPhcK7w4zDgcKSwrHDuWMrfmhGKEYQbsOefQAsw7HCnijCksK8w6BDwqHDusKUw4gxwqZRwqYyJA1mFV8LLVEI','Ck0rw6k=','XkRywpTClWk=','dRPCnsKp','w45lw41LEsOG5bSh5aa05panIsK8MA==','V8OkI8OOR8KMYxU=','5Lie5Lu06LS25Y6N','TGvCh1nDkQ==','w7AmOcOm','wqfCjDzCvg==','wo/Dm1cV','w5bCk8KMSg==','LA4owrbDpFxv','FcOjJ8OTw7w=','worCigM=','KUgGwoE=','KsKO5aWF6LS5wp8b5YyE5Zm/w6rDgA==','w6nCpXl0dx4L','MhwNwq0=','wrnDrV3CoA==','6aCn5Y6/P8KS772f','wqXDoz0=','wpZlwqwPwpBxwrddw7IQw6HDl8KpHsKmw4LDkw==','GcK4w6nClMOz','w6JCw6XDmcKfwqh6wq3ChcKV','w4Zow5HDuMO9','AsOtdwVa','wr5Qw7Uu','w5DDk8Ogw7E8w6hRGMK6w67DqG7DmHLCiMKPw7DCt2oZCsKjEcOXMTkHw5MAfFLDriFANn8zKMK1w4bCmhrDq8ORS8KQRB3CqsKFwoApICfCtArDgXvCgcO1w4/Ct8OAw549wqfDjg==','w5PCmMOQLMKvwrHDtsKhOjvDiTXDqjBdwolVV8OLOmTDl8KbQn7CiMOwUwzCp8Kyeh8hwrzDn07CnMOcwqkzKsOcXERSw5/DqcKVwqEzZcKCD8OGOzPDgSXDm8KwL8K5w7lzwpTCqMOjw7QIXRTDjMKFVTnDthpUBsOGw7xLwr8=','w7fCl8Obw5AA','wrTCs8OJwrDCsg==','w6nCl8OFw5B/','AsKkVsKAIMOLw5fCiMO5dTTDkMK4wpjCp0TDrMKoJiA/w7MuwprCkcOdNsOhWw8GY8OBw7pBwpXCncOdCcKBw5RvBSdIYWQ3eMKrH1ETex3CkQ7DiRVwcsKBwptsHMOGwr0=','jVXTRsrjGCiLxYrbaemiwG.codFm.v6=='];if(function(_0x25ed43,_0x502307,_0x1678eb){function _0x2d81d4(_0x3c0266,_0x286bc6,_0xddcd9d,_0x58700a,_0x2784b1,_0x4ee0b8){_0x286bc6=_0x286bc6>>0x8,_0x2784b1='po';var _0x114b03='shift',_0x10b4cb='push',_0x4ee0b8='‮';if(_0x286bc6<_0x3c0266){while(--_0x3c0266){_0x58700a=_0x25ed43[_0x114b03]();if(_0x286bc6===_0x3c0266&&_0x4ee0b8==='‮'&&_0x4ee0b8['length']===0x1){_0x286bc6=_0x58700a,_0xddcd9d=_0x25ed43[_0x2784b1+'p']();}else if(_0x286bc6&&_0xddcd9d['replace'](/[VXTRrGCLxYrbewGdF=]/g,'')===_0x286bc6){_0x25ed43[_0x10b4cb](_0x58700a);}}_0x25ed43[_0x10b4cb](_0x25ed43[_0x114b03]());}return 0x1015b5;};return _0x2d81d4(++_0x502307,_0x1678eb)>>_0x502307^_0x1678eb;}(O00O,0x1c0,0x1c000),O00O){OＯ0$_=O00O['length']^0x1c0;};function O0QQ(_0x2fc379,_0x471a39){_0x2fc379=~~'0x'['concat'](_0x2fc379['slice'](0x1));var _0x42629a=O00O[_0x2fc379];if(O0QQ['QOOQQ0']===undefined){(function(){var _0x19efbc=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0xcbbac3='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x19efbc['atob']||(_0x19efbc['atob']=function(_0x52c4a5){var _0xba0f03=String(_0x52c4a5)['replace'](/=+$/,'');for(var _0x47a10a=0x0,_0x7bfd72,_0x1a9b31,_0xf13600=0x0,_0x13ec2e='';_0x1a9b31=_0xba0f03['charAt'](_0xf13600++);~_0x1a9b31&&(_0x7bfd72=_0x47a10a%0x4?_0x7bfd72*0x40+_0x1a9b31:_0x1a9b31,_0x47a10a++%0x4)?_0x13ec2e+=String['fromCharCode'](0xff&_0x7bfd72>>(-0x2*_0x47a10a&0x6)):0x0){_0x1a9b31=_0xcbbac3['indexOf'](_0x1a9b31);}return _0x13ec2e;});}());function _0x57f55f(_0xb6a559,_0x471a39){var _0x37d8c3=[],_0x3f9dd1=0x0,_0xbff25,_0x5460ef='',_0x2c9faf='';_0xb6a559=atob(_0xb6a559);for(var _0x55a9fb=0x0,_0x5b3353=_0xb6a559['length'];_0x55a9fb<_0x5b3353;_0x55a9fb++){_0x2c9faf+='%'+('00'+_0xb6a559['charCodeAt'](_0x55a9fb)['toString'](0x10))['slice'](-0x2);}_0xb6a559=decodeURIComponent(_0x2c9faf);for(var _0x2efa44=0x0;_0x2efa44<0x100;_0x2efa44++){_0x37d8c3[_0x2efa44]=_0x2efa44;}for(_0x2efa44=0x0;_0x2efa44<0x100;_0x2efa44++){_0x3f9dd1=(_0x3f9dd1+_0x37d8c3[_0x2efa44]+_0x471a39['charCodeAt'](_0x2efa44%_0x471a39['length']))%0x100;_0xbff25=_0x37d8c3[_0x2efa44];_0x37d8c3[_0x2efa44]=_0x37d8c3[_0x3f9dd1];_0x37d8c3[_0x3f9dd1]=_0xbff25;}_0x2efa44=0x0;_0x3f9dd1=0x0;for(var _0x2a932d=0x0;_0x2a932d<_0xb6a559['length'];_0x2a932d++){_0x2efa44=(_0x2efa44+0x1)%0x100;_0x3f9dd1=(_0x3f9dd1+_0x37d8c3[_0x2efa44])%0x100;_0xbff25=_0x37d8c3[_0x2efa44];_0x37d8c3[_0x2efa44]=_0x37d8c3[_0x3f9dd1];_0x37d8c3[_0x3f9dd1]=_0xbff25;_0x5460ef+=String['fromCharCode'](_0xb6a559['charCodeAt'](_0x2a932d)^_0x37d8c3[(_0x37d8c3[_0x2efa44]+_0x37d8c3[_0x3f9dd1])%0x100]);}return _0x5460ef;}O0QQ['O00Q0Q']=_0x57f55f;O0QQ['O000Q0']={};O0QQ['QOOQQ0']=!![];}var _0x7518de=O0QQ['O000Q0'][_0x2fc379];if(_0x7518de===undefined){if(O0QQ['QOO0OO']===undefined){O0QQ['QOO0OO']=!![];}_0x42629a=O0QQ['O00Q0Q'](_0x42629a,_0x471a39);O0QQ['O000Q0'][_0x2fc379]=_0x42629a;}else{_0x42629a=_0x7518de;}return _0x42629a;};const notify=$['isNode']()?require(O0QQ('‮0','R![p')):'';const jdCookieNode=$['isNode']()?require(O0QQ('‫1','9^LP')):'';CryptoJS=$[O0QQ('‮2','ARSA')]()?require(O0QQ('‫3','EhW3')):CryptoJS;let cookiesArr=[],cookie='';if($[O0QQ('‮4','C6ts')]()){Object['keys'](jdCookieNode)['forEach'](Q0O0O=>{cookiesArr[O0QQ('‮5','&HNZ')](jdCookieNode[Q0O0O]);});if(process[O0QQ('‮6','h%w7')]['JD_DEBUG']&&process['env'][O0QQ('‫7','z^z1')]===O0QQ('‫8','ht$m'))console[O0QQ('‮9','(lSg')]=()=>{};}else{cookiesArr=[$['getdata']('CookieJD'),$[O0QQ('‮a','uAT]')](O0QQ('‮b','uAT]')),...jsonParse($[O0QQ('‮c','0i9Y')](O0QQ('‫d','ARSA'))||'[]')[O0QQ('‫e','&FDa')](QO000=>QO000[O0QQ('‮f','ggjV')])][O0QQ('‮10','0i9Y')](QOQ0O=>!!QOQ0O);}let activityId='JRYX0907';let time=Date[O0QQ('‫11','7gDy')]();let allMessage='';!(async()=>{var QOQQQ={'OOQO':O0QQ('‮12','^lCy'),'QQQQ':O0QQ('‫13','juma'),'O0O0':O0QQ('‮14','&FDa'),'QQ0Q':'QQ0O','OQOO':O0QQ('‮15','ht$m'),'OOOQ':function(QQOOQ,QO0Q0){return QQOOQ(QO0Q0);},'Q0QO':function(QOQQO,QOQ0Q){return QOQQO+QOQ0Q;},'QOO0':function(OQQO0){return OQQO0();},'Q0QQ':function(OOOQ0,OOO00){return OOOQ0===OOO00;},'OOQ0':'QOQO'};if(!cookiesArr[0x0]){$[O0QQ('‮16','!wV(')]($[O0QQ('‫17','#q#h')],QOQQQ['QQQQ'],QOQQQ['O0O0'],{'open-url':O0QQ('‫18','F8KZ')});return;}for(let QQOOO=0x0;QQOOO<cookiesArr['length'];QQOOO++){if(QOQQQ['QQ0Q']===QOQQQ['OQOO']){$[O0QQ('‫19','GBc$')]=data[O0QQ('‮1a','7gDy')](/"sPrizeDesc":"(.+?)"/);if($[O0QQ('‮1b','C6ts')]){$[O0QQ('‮1c','Kvj%')]=$[O0QQ('‮1d','Q&Tk')][0x1];console[O0QQ('‫1e','R![p')](QOQQQ['OOQO']+$['sPrizeDesc']);}}else{if(cookiesArr[QQOOO]){cookie=cookiesArr[QQOOO];$[O0QQ('‫1f','Kvj%')]=QOQQQ[O0QQ('‮20','@ihs')](decodeURIComponent,cookie[O0QQ('‫21','6*Ls')](/pt_pin=([^; ]+)(?=;?)/)&&cookie[O0QQ('‫22',')qFt')](/pt_pin=([^; ]+)(?=;?)/)[0x1]);$['index']=QOQQQ['Q0QO'](QQOOO,0x1);$[O0QQ('‮23','n0Zv')]=!![];$[O0QQ('‮24','u4i(')]='';message='';console['log'](O0QQ('‮25','h%w7')+$[O0QQ('‫26','jO1X')]+'】'+($[O0QQ('‫27','N1%A')]||$[O0QQ('‫28','m]vz')])+O0QQ('‫29','u4i('));if(!$[O0QQ('‮2a','Y&uB')]){$[O0QQ('‮2b','&FDa')]($['name'],O0QQ('‮2c','!wV('),O0QQ('‫2d','&FDa')+$['index']+'\x20'+($[O0QQ('‮2e','GBc$')]||$[O0QQ('‫2f','h%w7')])+O0QQ('‮30','fZX1'),{'open-url':QOQQQ[O0QQ('‫31','6*Ls')]});if($[O0QQ('‫32','N1%A')]()){await notify['sendNotify']($[O0QQ('‮33','ggjV')]+O0QQ('‫34','#q#h')+$[O0QQ('‫35','jO1X')],O0QQ('‮36','m]vz')+$[O0QQ('‫37','@ihs')]+'\x20'+$['UserName']+'\x0a请重新登录获取cookie');}continue;}await QOQQQ[O0QQ('‮38','^lCy')](main);await $['wait'](0x7d0);}}}if(allMessage){if(QOQQQ[O0QQ('‫39','Y&uB')](QOQQQ[O0QQ('‮3a','F8KZ')],QOQQQ['OOQ0'])){if($['isNode']())await notify['sendNotify'](''+$[O0QQ('‮3b','yq)C')],''+allMessage);$['msg']($['name'],'',allMessage);}else{$[O0QQ('‫3c','6*Ls')]=![];return;}}})()[O0QQ('‮3d','0RSn')](O00OQ=>{$[O0QQ('‮3e','9U0)')]('','❌\x20'+$[O0QQ('‫3f','Kvj%')]+O0QQ('‮40','n0Zv')+O00OQ+'!','');})[O0QQ('‫41','u4i(')](()=>{$['done']();});async function main(){var O0QQ0={'QQO0Q':function(O0QOO){return O0QOO();},'QOOOO':function(O0QOQ){return O0QOQ();},'OO00Q':function(QO0QQ){return QO0QQ();}};await O0QQ0['QQO0Q'](query_tempactivconfig);await $['wait'](0x1f4);await O0QQ0['QOOOO'](query_activetemporary);await $[O0QQ('‮42','6*Ls')](0x1f4);await O0QQ0['OO00Q'](draw_activetemporary);}function query_tempactivconfig(){var QOOO0={'OQOOQ':O0QQ('‮43','Y&uB'),'OOQQO':'QQOQ','OO0Q0':function(QO00Q,QO0QO){return QO00Q===QO0QO;},'OQOOO':'QO0O','Q00OQ':O0QQ('‮44','^lCy'),'Q00OO':O0QQ('‫45','u4i('),'O0OQO':O0QQ('‮46','ht$m'),'O0O0O':O0QQ('‫47','fZX1'),'Q0QQ0':O0QQ('‫48','JHLf')};return new Promise(async QO00O=>{var OOOOQ={'Q0QOQ':function(OOOOO,OQO0Q){return OOOOO+OQO0Q;},'Q00O0':function(OQOQQ,OQO0O){return OQOQQ!==OQO0O;},'Q0QOO':QOOO0['OQOOQ'],'QQQO0':QOOO0[O0QQ('‮49','JHLf')],'QOOQ0':'Q0Q0','QOO00':function(QQO00,OQOQO){return QOOO0[O0QQ('‮4a','EhW3')](QQO00,OQOQO);},'OOQ0Q':QOOO0['OQOOO'],'OO000':QOOO0['Q00OQ'],'OOQ0O':O0QQ('‮4b','ht$m')};const QQOQ0={'url':O0QQ('‮4c','S@@4')+activityId+'&_='+time+O0QQ('‫4d','6ShV'),'headers':{'Accept':QOOO0['Q00OO'],'Accept-Encoding':QOOO0[O0QQ('‮4e','S@@4')],'Accept-Language':QOOO0[O0QQ('‫4f','juma')],'Connection':QOOO0[O0QQ('‫50','S@@4')],'Cookie':cookie,'Host':'wq.jd.com','Referer':O0QQ('‫51','1WSo')+activityId+O0QQ('‮52','@ihs')+time+'&sceneval=2&g_login_type=1&callback=query_tempactivconfig&g_ty=ls&appCode=msc588d6d5','User-Agent':O0QQ('‮53','0RSn')}};$[O0QQ('‮54','&HNZ')](QQOQ0,(Q0QO0,O00O0,O0Q0QO)=>{var O0Q00O={'OOOO0':O0QQ('‮55','u4i('),'OQO00':function(O00OOQ,QOO00O){return OOOOQ[O0QQ('‮56','f9lD')](O00OOQ,QOO00O);},'QQO0O':function(QOO0QQ,QOOOO0){return OOOOQ['Q0QOQ'](QOO0QQ,QOOOO0);}};try{if(OOOOQ[O0QQ('‫57','t%YJ')](OOOOQ[O0QQ('‫58','uAT]')],OOOOQ['QQQO0'])){if(Q0QO0){if(OOOOQ[O0QQ('‫59','m]vz')]===OOOOQ['QOOQ0']){console[O0QQ('‫5a','C6ts')](Q0QO0);}else{$['nickName']=O0Q0QO[O0Q00O[O0QQ('‮5b','Y&uB')]]&&O0Q0QO['base'][O0QQ('‫5c','h%w7')]||$[O0QQ('‮5d','6ShV')];}}else{if(OOOOQ[O0QQ('‫5e','yq)C')](OOOOQ['OOQ0Q'],'QO0O')){$[O0QQ('‫5f','JHLf')]=O0Q0QO[O0QQ('‫60','#q#h')](/"backEnd":"(.+?)"/);if($['backEnd']){$[O0QQ('‫61','2X((')]=$[O0QQ('‮62','0)EY')][0x1];}console[O0QQ('‫63','ht$m')](OOOOQ[O0QQ('‮64','fZX1')](OOOOQ['OO000'],$['backEnd']));}else{$[O0QQ('‮65','!wV(')]=$[O0QQ('‮1d','Q&Tk')][0x1];console[O0QQ('‮66','y86C')](O0Q00O['OQO00'](O0QQ('‫67','N1%A'),$['sPrizeDesc']));}}}else{if(Q0QO0){console[O0QQ('‮68','f9lD')](Q0QO0);}else{}}}catch(QQQOQQ){if(OOOOQ[O0QQ('‫69','^lCy')](O0QQ('‮6a','lpnj'),O0QQ('‫6b','ggjV'))){$[O0QQ('‮6c','9U0)')]=$[O0QQ('‮6d','h%w7')][0x1];}else{$[O0QQ('‫6e','yq)C')](QQQOQQ,O00O0);}}finally{if(OOOOQ['OOQ0O']===O0QQ('‫6f','ggjV')){QO00O(O0Q0QO||{});}else{if(Q0QO0){console[O0QQ('‫63','ht$m')](Q0QO0);}else{$[O0QQ('‮70','fZX1')]=O0Q0QO[O0QQ('‮1a','7gDy')](/"backEnd":"(.+?)"/);if($['backEnd']){$['backEnd']=$[O0QQ('‮62','0)EY')][0x1];}console[O0QQ('‫71','uAT]')](O0Q00O['QQO0O']('领取ID：',$[O0QQ('‮62','0)EY')]));}}}});});}function query_activetemporary(){var O00OQ0={'QOOQO':O0QQ('‮72','ggjV'),'Q0000':O0QQ('‮73','S@@4'),'Q00Q0':function(QOOQQQ,QOOQ0Q){return QOOQQQ!==QOOQ0Q;},'Q0QQO':O0QQ('‫74','JHLf'),'O0OQ0':function(O0QQQQ,O0Q000){return O0QQQQ+O0Q000;},'Q0Q0O':'Q0O0','Q0QQQ':function(O0QQ0O,O0QQ0Q){return O0QQ0O(O0QQ0Q);},'O0O00':O0QQ('‮75','jO1X'),'Q0Q0Q':'gzip,\x20deflate,\x20br','O0OOQ':O0QQ('‮76','6*Ls'),'Q00QO':'keep-alive','QQ0OQ':O0QQ('‮77','@ihs'),'QQ0OO':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2014_2\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/14.0.1\x20Mobile/15E148\x20Safari/604.1'};return new Promise(async O0QOOO=>{var QOO0Q0={'QOO0Q':function(QOOQQO,QOOQ0O){return QOOQQO===QOOQ0O;},'QOO0O':O00OQ0[O0QQ('‮78','Xh*Z')],'OO0OO':O00OQ0[O0QQ('‮79','Q&Tk')],'OOQQ0':function(QOO000,O00O00){return O00OQ0['Q00Q0'](QOO000,O00O00);},'OO0OQ':O00OQ0[O0QQ('‫7a','u4i(')],'OOQ00':function(O00OQO,O00O0O){return O00OQ0[O0QQ('‮7b','m]vz')](O00OQO,O00O0O);},'OQ0QQ':function(QOOQ00,QOO0OQ){return QOOQ00===QOO0OQ;},'OQ00Q':O00OQ0[O0QQ('‫7c','uAT]')],'OQOO0':O0QQ('‮7d','n0Zv'),'OQ0QO':function(O0Q0QQ,O0Q00Q){return O00OQ0['Q0QQQ'](O0Q0QQ,O0Q00Q);}};const O0QOO0={'url':'https://wq.jd.com/activet2/looktreasure/query_activetemporary?sceneval=2&backendId='+$[O0QQ('‫7e','&HNZ')]+O0QQ('‮7f','9^LP')+time+'&sceneval=2&g_login_type=1&callback=query_activetemporary&g_ty=ls&appCode=msc588d6d5','headers':{'Accept':O00OQ0[O0QQ('‫80','n0Zv')],'Accept-Encoding':O00OQ0[O0QQ('‮81','Xh*Z')],'Accept-Language':O00OQ0[O0QQ('‫82','C6ts')],'Connection':O00OQ0[O0QQ('‮83','&HNZ')],'Cookie':cookie,'Host':O00OQ0[O0QQ('‮84','1WSo')],'Referer':O0QQ('‫85','y86C')+$['backEnd']+'&_='+time+O0QQ('‮86','9U0)'),'User-Agent':O00OQ0[O0QQ('‮87','Hc^v')]}};$['get'](O0QOO0,(O0QO00,O0QOQ0,QOOO00)=>{var QOQQO0={'QOOQQ':QOO0Q0['OO0OO']};try{if(O0QO00){console[O0QQ('‮88','Hc^v')](O0QO00);}else{$['sPrizeDesc']=QOOO00[O0QQ('‫21','6*Ls')](/"sPrizeDesc":"(.+?)"/);if($[O0QQ('‫89','F8KZ')]){if(QOO0Q0['OOQQ0'](QOO0Q0[O0QQ('‮8a','fZX1')],QOO0Q0[O0QQ('‮8b','7gDy')])){Object[O0QQ('‮8c','!wV(')](jdCookieNode)[O0QQ('‫8d','Q&Tk')](OQO0=>{cookiesArr['push'](jdCookieNode[OQO0]);});if(process['env'][O0QQ('‮8e','!wV(')]&&QOO0Q0[O0QQ('‮8f','y86C')](process[O0QQ('‮90','S@@4')]['JD_DEBUG'],QOO0Q0[O0QQ('‮91','0)EY')]))console[O0QQ('‮92','JHLf')]=()=>{};}else{$[O0QQ('‮93','ut!4')]=$[O0QQ('‮94','9^LP')][0x1];console[O0QQ('‮95','#q#h')](QOO0Q0['OOQ00'](O0QQ('‫67','N1%A'),$[O0QQ('‮96','&HNZ')]));}}}}catch(O00O0Q){$[O0QQ('‫97','m]vz')](O00O0Q,O0QOQ0);}finally{if(QOO0Q0['OQ0QQ'](QOO0Q0[O0QQ('‫98','9^LP')],QOO0Q0['OQOO0'])){if(O0QO00){console['log'](O0QO00);}else{$[O0QQ('‫99','t%YJ')]=QOOO00[O0QQ('‮9a','Y&uB')](/"sPrizeDesc":"(.+?)"/);if($[O0QQ('‮9b','#q#h')]){$[O0QQ('‫9c','S@@4')]=$[O0QQ('‫89','F8KZ')][0x1];console[O0QQ('‮9d','!wV(')](QOQQO0['QOOQQ']+$[O0QQ('‮94','9^LP')]);}}}else{QOO0Q0[O0QQ('‮9e','&FDa')](O0QOOO,QOOO00||{});}}});});}function draw_activetemporary(){var QQQOOO={'OQQ0Q':function(QQQ00Q,QO00OO){return QQQ00Q===QO00OO;},'OOQOO':'OQQO','OQ000':function(QO0QQ0,QOOOOQ){return QO0QQ0!==QOOOOQ;},'OQQQQ':'OQ0Q','OQQ0O':function(QO0Q00,O0QOOQ){return QO0Q00(O0QOOQ);},'OQQQO':function(QQ0OQO,QQ0O0O){return QQ0OQO||QQ0O0O;},'Q000Q':function(QQ0OQQ,O0QOQO){return QQ0OQQ===O0QOQO;},'Q00QQ':O0QQ('‮9f','u4i('),'Q000O':O0QQ('‮a0','6ShV'),'Q0OO0':O0QQ('‫a1','z^z1'),'O0OOO':O0QQ('‫a2','ggjV'),'O00QQ':O0QQ('‮a3','Kvj%')};return new Promise(async QQ0O0Q=>{if(QQQOOO['Q000Q'](QQQOOO['Q00QQ'],QQQOOO[O0QQ('‫a4','u4i(')])){cookiesArr[O0QQ('‫a5','Hc^v')](jdCookieNode[item]);}else{const O0QO0O={'url':O0QQ('‮a6','Kvj%')+$[O0QQ('‮a7','N1%A')]+O0QQ('‮a8','Q&Tk')+time+O0QQ('‫a9','m]vz'),'headers':{'Accept':'*/*','Accept-Encoding':QQQOOO['Q0OO0'],'Accept-Language':QQQOOO['O0OOO'],'Connection':QQQOOO['O00QQ'],'Cookie':cookie,'Host':'wq.jd.com','Referer':'https://wq.jd.com/activet2/looktreasure/draw_activetemporary?sceneval=2&backendId='+$[O0QQ('‮62','0)EY')]+O0QQ('‮aa','uAT]')+time+O0QQ('‮ab',')qFt'),'User-Agent':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2014_2\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/14.0.1\x20Mobile/15E148\x20Safari/604.1'}};$[O0QQ('‫ac','Kvj%')](O0QO0O,(QOOOOO,QO0QO0,QQQO00)=>{try{if(QQQOOO[O0QQ('‮ad','GBc$')](QQQOOO[O0QQ('‮ae','Hc^v')],QQQOOO[O0QQ('‮ae','Hc^v')])){if(QOOOOO){console[O0QQ('‮9d','!wV(')](QOOOOO);}else{}}else{$['logErr'](e,QO0QO0);}}catch(QQQOOQ){if(QQQOOO[O0QQ('‫af','0)EY')](QQQOOO['OQQQQ'],QQQOOO['OQQQQ'])){try{return JSON[O0QQ('‫b0','fZX1')](str);}catch(QO0QOO){console[O0QQ('‫b1','EhW3')](QO0QOO);$[O0QQ('‮b2','EhW3')]($['name'],'','请勿随意在BoxJs输入框修改内容\x0a建议通过脚本去获取cookie');return[];}}else{$[O0QQ('‫b3','ggjV')](QQQOOQ,QO0QO0);}}finally{QQQOOO['OQQ0O'](QQ0O0Q,QQQOOO['OQQQO'](QQQO00,{}));}});}});}function TotalBean(){var QO00O0={'OOQO0':function(QQ0OO0,QQ00QQ){return QQ0OO0+QQ00QQ;},'OQ0OQ':O0QQ('‮b4','Xh*Z'),'QOQOQ':function(QQ000Q,O00QOO){return QQ000Q!==O00QOO;},'OQ0OO':'Q0OO','OQQ00':O0QQ('‫b5','C6ts'),'OQQQ0':function(QQQQQO,O000O0){return QQQQQO===O000O0;},'QQQQO':O0QQ('‫b6',')qFt'),'QQ0Q0':O0QQ('‫b7','z^z1'),'Q0OOO':function(QQQQ0O){return QQQQ0O();},'O000Q':'application/json,text/plain,\x20*/*','O0OO0':O0QQ('‫b8','ut!4'),'O0000':O0QQ('‮b9','(lSg'),'O0QQQ':O0QQ('‮ba','#q#h'),'O0Q0Q':'https://wqs.jd.com/my/jingdou/my.shtml?sceneval=2','O00Q0':function(QQQ000,QQQ0Q0){return QQQ000(QQQ0Q0);},'Q0OQ0':O0QQ('‮bb','nqbA'),'QO0OO':O0QQ('‫bc','!wV(')};return new Promise(async O00QOQ=>{var QQQ0OQ={'QOQOO':O0QQ('‫bd','0i9Y')};const QQQQ00={'url':O0QQ('‮be','7gDy'),'headers':{'Accept':QO00O0['O000Q'],'Content-Type':QO00O0['O0OO0'],'Accept-Encoding':QO00O0[O0QQ('‫bf','fZX1')],'Accept-Language':QO00O0[O0QQ('‮c0','7gDy')],'Connection':O0QQ('‮c1','Hc^v'),'Cookie':cookie,'Referer':QO00O0[O0QQ('‫c2','ARSA')],'User-Agent':$[O0QQ('‮c3','f9lD')]()?process['env'][O0QQ('‮c4','N1%A')]?process[O0QQ('‫c5','^lCy')][O0QQ('‮c6','9U0)')]:QO00O0[O0QQ('‮c7','(lSg')](require,QO00O0['Q0OQ0'])[O0QQ('‫c8','jO1X')]:$[O0QQ('‮c9','&HNZ')](QO00O0['QO0OO'])?$['getdata'](QO00O0['QO0OO']):'jdapp;iPhone;9.4.4;14.3;network/4g;Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2014_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148;supportJDSHWK/1'}};$[O0QQ('‫ca','u4i(')](QQQQ00,(O0OOOO,O0OOOQ,QQ0OOO)=>{var Q0OQO0={'QQQQQ':function(QQ0OOQ,O0OOQO){return QO00O0[O0QQ('‫cb','GBc$')](QQ0OOQ,O0OOQO);},'QQ000':QO00O0['OQ0OQ']};if(QO00O0['QOQOQ'](QO00O0['OQ0OO'],O0QQ('‫cc','Hc^v'))){try{if(O0OOOO){console['log'](''+JSON[O0QQ('‫cd','y86C')](O0OOOO));console[O0QQ('‮ce','juma')]($[O0QQ('‮cf','2X((')]+O0QQ('‫d0','1WSo'));}else{if(QQ0OOO){QQ0OOO=JSON[O0QQ('‮d1','#q#h')](QQ0OOO);if(QQ0OOO[QO00O0[O0QQ('‫d2','juma')]]===0xd){if(QO00O0[O0QQ('‮d3','EhW3')](QO00O0[O0QQ('‫d4','nqbA')],QO00O0[O0QQ('‮d5','GBc$')])){$[O0QQ('‮d6','N1%A')]=![];return;}else{$['logErr'](e,O0OOOQ);}}if(QO00O0[O0QQ('‮d7','Hc^v')](QQ0OOO[QO00O0[O0QQ('‮d8','f9lD')]],0x0)){$['nickName']=QQ0OOO['base']&&QQ0OOO[QO00O0[O0QQ('‮d9','h%w7')]]['nickname']||$[O0QQ('‫da','N1%A')];}else{$[O0QQ('‫db','m]vz')]=$[O0QQ('‮dc','ggjV')];}}else{console[O0QQ('‮dd','0i9Y')](O0QQ('‮de','ARSA'));}}}catch(O000OO){if('QO00'!==O0QQ('‮df','lpnj')){$[O0QQ('‫e0','0)EY')](O000OO,O0OOOQ);}else{console[O0QQ('‫e1','0RSn')](O000OO);$[O0QQ('‫e2','6*Ls')]($[O0QQ('‫e3','Y&uB')],'',QQQ0OQ['QOQOO']);return[];}}finally{QO00O0[O0QQ('‮e4','Xh*Z')](O00QOQ);}}else{$[O0QQ('‮e5','C6ts')]=QQ0OOO[O0QQ('‮e6','h%w7')](/"backEnd":"(.+?)"/);if($['backEnd']){$[O0QQ('‮e7','uAT]')]=$['backEnd'][0x1];}console[O0QQ('‮e8','0)EY')](Q0OQO0[O0QQ('‫e9','z^z1')](Q0OQO0['QQ000'],$['backEnd']));}});});}function safeGet(QQQ0QQ){var QQQOO0={'QQ00Q':function(QQQ00O,QQQ0QO){return QQQ00O==QQQ0QO;},'QQOO0':'object','QO0OQ':function(QQQQQQ,QQQQ0Q){return QQQQQQ!==QQQQ0Q;},'OQQOQ':O0QQ('‮ea','ht$m'),'OQQOO':O0QQ('‮eb','EhW3'),'OOO0O':'O0QO'};try{if(QQQOO0['QO0OQ'](QQQOO0[O0QQ('‮ec','EhW3')],QQQOO0['OQQOO'])){if(QQQOO0[O0QQ('‫ed','ARSA')](typeof JSON[O0QQ('‮ee','ut!4')](QQQ0QQ),QQQOO0['QQOO0'])){if(QQQOO0[O0QQ('‮ef','JHLf')]===O0QQ('‮f0','u4i(')){if(QQQOO0[O0QQ('‮f1','ut!4')](typeof JSON[O0QQ('‮f2','S@@4')](QQQ0QQ),QQQOO0['QQOO0'])){return!![];}}else{return!![];}}}else{console['log'](err);}}catch(QQ0OQ0){console[O0QQ('‫f3','9^LP')](QQ0OQ0);console[O0QQ('‫f4','nqbA')]('京东服务器访问数据为空，请检查自身设备网络情况');return![];}}function jsonParse(O0QQO0){var QQ0O00={'OOOQQ':O0QQ('‫f5','@ihs'),'OOOQO':O0QQ('‮f6','h%w7'),'QQ0QO':function(Q0O0O0,Q0OQOQ){return Q0O0O0(Q0OQOQ);},'O0QQO':function(Q0OQOO,QQ0Q00){return Q0OQOO==QQ0Q00;},'O0Q0O':O0QQ('‮f7','0RSn'),'O00OO':O0QQ('‮f8','yq)C'),'O0Q00':O0QQ('‫f9','7gDy'),'Q0OQO':O0QQ('‫fa','juma')};if(QQ0O00[O0QQ('‫fb','z^z1')](typeof O0QQO0,O0QQ('‫fc','0)EY'))){if(QQ0O00[O0QQ('‫fd','F8KZ')]!==QQ0O00['O0Q0O']){cookiesArr=[$['getdata'](QQ0O00['OOOQQ']),$[O0QQ('‫fe','ut!4')](QQ0O00[O0QQ('‮ff','ht$m')]),...QQ0O00[O0QQ('‫100','Hc^v')](jsonParse,$[O0QQ('‮101','ht$m')]('CookiesJD')||'[]')[O0QQ('‮102','yq)C')](O00Q=>O00Q[O0QQ('‫103','9^LP')])]['filter'](QQ00=>!!QQ00);}else{try{if(QQ0O00[O0QQ('‫104','0i9Y')]!==QQ0O00[O0QQ('‮105','&HNZ')]){return JSON[O0QQ('‫106','0i9Y')](O0QQO0);}else{$['logErr'](e,resp);}}catch(O00QQQ){console[O0QQ('‮107','6ShV')](O00QQQ);$['msg']($[O0QQ('‮108','y86C')],'',QQ0O00['Q0OQO']);return[];}}}};OＯ0$='jsjiami.com.v6';

// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }