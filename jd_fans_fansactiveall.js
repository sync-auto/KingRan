/*
粉丝福利红包一次性
cron:49 17,18 * * *
============Quantumultx===============
[task_local]
#粉丝福利红包一次性
49 17,18 * * * jd_fanshb.js, tag=粉丝福利红包一次性, enabled=true
 */

const $ = new Env('粉丝福利红包一次性');
var OＯ0$='jsjiami.com.v6',OＯ0$_=['‮OＯ0$'],O00O=[OＯ0$,'w4xdw7crw5U=','wrNcNcO3TQ==','wrBlwpk=','w5rDrFDCnwJaw6Z/XcOvXSkow5vCtMKkUsKawqIhw5DDs8KrEgHCnMOPdXXCvyvCgMO9OcO2HHd9DSd1wrJnwprCmcOWwohlwqjDnmfDnMO7AXk3w5PDkMORwpVEfsO3w6XDlxXDg8O6w47Ds8K6FMKnW8K4acKEXF3DtwDDtcKNw4w=','C8Ouwo5cwqg=','w5bDq8KF','I8KgwphLw6o=','TMKEZxEc','wpVnOGXDuw==','w4xdw7crwrQ=','b8KRwrZmwro=','TMKEeQ9j','RMKFw4XCuMOo','HcKSFsOWwqM=','OsOJwp/DuSjCvVs=','GcKMw47CmMKswqrCuQ==','FMO7wrfDoz9iwpE=','wpPCkhgtIh7Cug==','w4XDrCkXZg==','woANZsOTRznDmA==','WE7DuMKpwqw=','wq/DlMK3wrQ=','bAhtw5PCl3jDjg==','TVHDqFtywojCoA==','w78MwqQPw4EuYQ==','VU7CnQ==','wrHCq8K3wrTDsA==','6aOl5Y+fwqJG776T','FsOOREZBwrgd','wqMGwrfCl8O2wqY=','WsKFw5vCuMKJ','Q2XDhcOy','PcKgwpg0w7Q=','O0wAwr5V','XcOvBw==','wqs1A0/DiSU=','VDXDq2A=','DkHCu1Q=','5a+O776R6I285b+x77+c','wq3Cr3zDig==','WsKFw5vCuA==','wrciwo3ClSbDvlI/KcO3ciIVFlc3w6I=','wpXCgcKDw7TCklXCgzzCqh4=','HMOFw7zCjcKwwr80E8OZ','VhXCoVjCmCg5w7M4FcOIJAplZsOAWwh/wolmwo3DjH7CpzxPw4c1EQccXMKIbcOqUMOkwoXDpcKKKMOUekkXfMOmwphmDsKQw71Tw4zDicO0e24RIMO/wpnDl8KAw5YUwpnCscORRmnCu8ONwrxWTcKlw7HDqkRTAMOKYhvCgMKZAD/CkwQ1LsOoNsKyw7lVwrx/MAxMwo8hHcKpZCfDpkHDlCjCj8OIw6IZO8Ktwqkfb8OYH8KOw4rDgcK/R8ODF8OjL8KYwoUe','wrgswpDClXnDpBl1OMOqPTwUFBQ6w73Ck25UwqI5Z8OfPsOlEMOACWtxZcKhwqzCsU/DjTfDkcKzw4FQBWMURsKrw7Q+XhxWG8OfwrIkFsOiYW05S1hOwo1+ewE0TSpyA8K+HcOQY8Oew4HCrsKXwpdc','w53ClRvCqk/Dm8Klw5lAHA99aMOuacKAw6k7wpNKGcKYY8OSwqMzw5bDgGfChcO7PcOtcnAdw78rdjBZCsOjTy/Dt1/DnFADA8KLbMOywoDCq8OKXSbDpsOuw47CskPDnTbDlUPCm8O2wrzCgjfDhMOIJcKEw6INwqcpRMKoBA==','PS7Dog==','ZMOuDA0U','Z8K9BSM9','woxSw6XDnMKx','W8OAw5Q=','w4NhwqXDkMO3','FStbw5U=','w5PDuldJSA==','w5kKw6vCqlw=','DcO+wpvCgw4=','YH/Cu394','XGDDuVlNwoPCgDJODw==','w5LClSXCjik=','w4LDnsKDXMK+BBxwwpbDkg==','P8KNK8KPw6low542wpTDhw==','wqMIwpbCjHDCu3I/PMO4','ccK6Tw==','ccOuwrZ4w4U=','AcKhwqUSw5/DrFlISMK1','w77DgcKgBcO0','RjHCh8Kp','wq09NcOpUw==','dxXCvA==','wp3CnBw=','5Luo5LuC5p+M5Yqs5ZqP6K+76ZSb5peS5o675Lqd56q8776E6K+k5qOw5p+r6Ie06Lm06K2X5ae/57+o57qg5oGz5YSb','KMKxwqZIwpU2','wrPDjnzCtVw=','HMOMw7s3wok=','wrHCtcOWwrTDsA==','bMKMIw==','w7oXwq4UwqhgYUsQLW4iw43CvcOjwqEK','Q0nDl3DDvg==','LmbCkWvDpQ1kYWxVTw3CuWLDgB3ChsKcw68PREISAzPCkWHChMKiHEzDrFV1wooCBWDCqWXChX5Cw5vDtMKqTiEIUzPCiR3DqnfDmSYmFibDpx7CsMOfwpXDncKtPMKdX2XCgsOnTsOlw5PCnE7DsQrClgZABmjCiFdMKsKyQSV4IEbCs8K5wrAsLmjDqRlgFxwJScKOw7nDncKjJ0XCvMKiPcOsw4zCrsKPfcO6w4d4NiZJw6rClMKMwrIOwpRHecOq','wpTDq0fCih8Fwr8xRsKjQWUrwqrCu8KkWMOcwq0dw5DDo8KtEkjCn8OGenvCvCzClsOuP8O8UnN6DXpowp9ywojCq8OHwopywrXDgXTDi8OxAm8xw4bCl8OEwrMPdMKpw6zDilbDlMOrw5LCjcOnVsKgB8K2ccKCBwHChgDDvg==','fsO3w4E=','woxSwoTDnMKx','YMORMXbDnA==','A8OAwqbCl8Knwqt4U8ODwqrCq8O3DcO+GcKRw6XDncOHw4XDlsKVJ2obwobDqkbDihXClsKtIMKbwqHDgcKCw4MhXMKMOXTCswYLSzjCtXxzScO0wrbCmX3DpwXDrcOIw7N8SsOUwrzDkHc2woQHH8K7LsKxwpTChlPDt8OgSHvDqg==','f8K0SysWw5vDgQ==','fDtW','TcOHwrHCgsK6w7QhHcOYw6bCt8K7DsKPFsKRw6/Cm8OIw7nDlsKFIWpSwoXDo0nDhBbCkcK7M8KdwqvCj8KTw4MlBMK3KnbCsDAcTTjCuWdmUsOjwrrCm2vCswPDgMOFwrUyRcOCw7TDlHEnwqtVScO4ccK9woTCjgPCocK8ZSnCs8Oc','wrw3woM=','I8OBwoZLw7Q=','w78MwrQB','fsORUBc=','BsOKU05rwrIc','Cyskw5U=','UsKEeRE=','fn/CuwA=','6K6D5YmQ6Zqo5oSi5ZyswpQWRsOrw5vovLrlhpTmoKzkv6DmlYvlh5HlrqvChOW6j+itlemArOi9kuiGtOadi+WNteiPk+WPj8K0w7BGWMODBg==','wqUnGUbDgzLChsOKExLDnwjCoMKvwo7CgmRKwqTCsx1fwq3Cq2o6w4HDqsOHwq7DmGs4','aRNnw4jDvjbDjmnDnMOZU03DrsOQfmM/','A8OAwqbCl8Knwqt4U8ODwqrDtsKzA8K0VMKdw6fCn8KJw4vDm8OTO2YBw5PCoUXDkFXCkMKgfMKNwqjDhsKaw517AMKLLnvCoS8LRHHDrg==','CSXDvsOEwrjDosKoXMO1ZkXCiwM=','C8KPw7FCwqg=','wrHCtcK3wrTCjw==','w67CpQDCvA4=','YGTDhsOeCw==','wrNcSsO3TQ==','wqDCojQJ','PcOBw6dLw7Q=','w77CvsK+esO0','w6fCvW1EPg==','HxzCknrCkQ==','wpPCkgzCv1LChMO8wpdbUBMxa8KfZsKAw6N9wohmCMKTPMOew7Bkwp/CjFfCnMOyLcO1W191w707YQtOM8OtEyjDvUzDl0EQD8KXPsKy','wp/ClMKWw6jDllfCjiHCtRTCjRd3w6QaJ8Oqwo7DhcKLK2LCjwbChnVCwpAyb8OCDg==','w6fCvW0lPg==','TMOlZxFj','ED7Cuys8','ZMKRbWwU','w5PDukkoKQ==','KALDhQsXw4I=','NsOzwr0=','dMOlwrh8wqYvw75Sw4PDgx8BbQ==','wrPDjmLDilw=','w6TDncK0Z8KbIB9QwqvDpQ==','wpnCgcKSw6DDnkDCjg==','w5x+w7HCug==','w7VVwoDDu8OZw5h0','woJfwoptwqnCqX7DuCnCtMKLQcKHwrzDmhfDscOlNknCksKgP8KQdsKfZ8KKw7UbL2vCgMOtw5PDhsK2JG84woLCgMOSwqnDo8OKw4TCiWfDiHdXHjh+GRLCjcOJYXgiU8K4wqYFwrjCpsOZwpvDoA3CgsOgSXNgw7bChC8FLAcIWsKmwr/Dt8OUwpczS8K4w7bCiMKuQwvDs3jDp8KIwr3Cnho9w6/Cm8KLb8O/FE8oRMKnQsOow64UZCXDhsKnNsKnwq1BYcOqwr/DiDTChMKGXsOJAiBNF8Oqw4vCncO/U8OfbBxowr3ClcOKS17DkMK2woTDlMKN','KMOHwo/Dpg==','w6DCvsK+esO0','CcKIw5nCkMKGwqDCuA==','AsKtwoQpw7Y=','w5c8C3gD','PEPCpA==','NAUGw6E=','ZcK8QsKjTA==','wpPCkggj','UMOIwoRCwpsLw4Fo','w5ZAwqDDvMK4','w5kKwpTCqlw=','OzNhw59V','YMORMXbCvQ==','FMOswqXCnwzCnsOi','5LiT5Luo5p2c5YmM5Zip6L2B5Zi856iE5pSt5o28','w6BVwoDDvMOXw4hw','JUwAwqAq','OsO7woPCqMOk','w5/DgT/DscOuwpMieg==','TMKEeREC','YGHDmmE=','w6lww6LCv8Ot','H33CkhvCkQ==','wqo+CkHDpDDCisOb','QMK5w6/Cm8KWwpvCrMOF','5Lqx5LuJ5pyl5Yuh5Zi76L2h5Zm756qb5pac5o+Q','WsKbw5vCuMKX','wppewp9+wrbDtnI=','EsKew6HCnMKOwq3Csw==','OcOLw6TDmUo=','LMKvw5nCoTo=','LxjDqA8dw4bCiMOM','IcOcQl9KwrcUWw==','wq/CtcK3wrTDsA==','w4pOwrU=','w5LChzY=','UMOAwopM','HMOMw7spwpc=','HxzCkgU=','dnDCqyM=','b8OuwrYZ','VDXClAHCuw==','DiDCuytD','ZsKaw7jCgMKiwp/ChcOFwqbDkA==','O8OgaHxL','AsKQwqUIw4A=','GcO4wr7DrRl4','TMOlZw8=','w6DDn8OBZMKL','wpLCi8KB','ccOuwqgZwro=','wosYWRo=','BcOVwr/Cgg==','HRXlpqbotqplwrrljo7lmYfDpxo=','WMKcdA==','wpDDsFQ=','5LuH5Lqo5p+f5YmG5Zq86Kyu6Za55pSM5o+a5Luh56u/776R6K6e5qCQ5p6f6ISU6Lij6K2M5aah57+357m+5oC55Yek','fR18w5HCvHE=','DkHDmjU8','SUDCiGDDtQ==','KMKxwqY=','QkPDrA==','6K2v5Yuz6ZuL5oS45Z2kIMOWwoHDm17ovJDlhabmobvkvLbmlLnlhLvlrJnDlOW6i+isgOmCg+i+vuiFgOaejOWNguiMnOWPscKaGsOsbHvChQ==','dsKHwo/DtwPCt3FBLsOlLMKs','w6p4A07DqT7CiMOVExjCn03Cqw==','H2Yowpw=','Jx7DuSESw4TCjQ==','KhEYw6w=','wp7CiA4=','ZXTDlHRywqTCkRA=','w4BAwr7DvMK4','w5PCmzY=','clrDuMOkLcO/W8Oj','E2Ylwot7HsKo','w6VOwr3DpMK0R8OzHcKm','wqkAwrzCpsOhwqY=','BcObwqU=','FcKPw7FC','wrNcNcKI','44K45o2d56Wn44Gl6K+55Yao6I235Y+x5Lq05LuZ6LSZ5Y2a5Lq+HsK/aMO4wqzCqcOU55mj5oy/5L6q55etXkLDoXfCgsOB55iK5Lu/5LuJ562D5YiY6Iyu5Y+1','dcKhXDAgwo/CisOOwo7Dm8OBMTLCgisIw6sTFGxFPX0AP8K2dcKqw5Y3w5TCsMOLwrVNw5Row4vDkCfCojBy','T0QRSA==','wqd0w5tS','YgZp','w7V/Iw==','wpLDvl7Cnw==','wpbCkMKSw7TDjA7DgHrCvh7CglYzw7pbI8Kiw5TDg8KcMmLCnQ/ChnIDw497IsKDbcKHKcODw6XDsMKAw58GDDzDow==','Q1XDpVdDwo4=','wq/CtcK3w5U=','wo8NccObag==','E8O2worCmyXClsOhwpA=','S1vCoU5Zwo3Dj+W+qeWnsOOAj+S7tuS4sui2nOWOkA==','chTCv1TCjA==','e8Kjw6nCgsKWwpvCrMOF','ekPDrkJ5wofCqTI=','DSDCgcK9w5fCmsOdN8KYKQ==','w6vDhlR3fsKxDw==','X1TDusOq','W8K3X1ZqwpwGFQ==','bFLCn2HDnmfDuRI=','O+ivgumFmuaUv+eYv+W/j+iOpuWNscOXUsOuw4pKw7VAVF5hNzDCkMORWQbDpsKVI8OTYcKUwpREwodcw77Dq8O/w5rCiVPDk8Khw4oWAcKEAjkGw4fCtx8=','woEJw5TCtA==','EsKew6PCnMKNwqE=','aB/CtVXCuisswrVrQg==','QVHDplU=','5LuY5Lif6LW35YyY','wosCYcOdeg==','fuivtOmGnOaVn+eZoeW8v+iNvuWOkMKowoFGw4zCpcKw','wrHCtcKpw4s=','HMOVwrvCkw==','cgnClV7CkCE=','X8OhDSM=','w7tJw4M=','wrYxworChGbCsk8=','ZMKMKno=','w6kewofDscOOw47DvQB2','BcKQwr4P','RMKFw4XCpsKJ','wonChcKPw7A=','JVIew59L','6aKh5Y+cw6LDk++/pw==','woEXwrXCqg==','w6DCmA3Cqg==','PcKgw6c0','SSbDgQ==','CMKZw7oYw4s=','w6rDgWxoasOiTmkmwpzDisO6bsOgwodhKD8IP0bCsMOXfUBSw6/ClMONw4PCqTjDoMOnMMOXwq3ChH9xVyvDjijDv8KZwpnCpMOQw4pPw7E9S2VGwpLCrcOKw5XCsTXCr8ONZmtU','F2rCqg==','w5I8wogrw4s=','w4/DtzQEIsOAwqRCfsKpXsOZw5tRw7Blw6E=','ZqgjsjFiafmiG.cpoSmX.vFKN6XfV=='];if(function(_0x33f02b,_0x52dcc8,_0x50ae3f){function _0x33ca46(_0x415ef2,_0x3198f7,_0x23cb6f,_0x29bc96,_0x2c66c0,_0x4f3520){_0x3198f7=_0x3198f7>>0x8,_0x2c66c0='po';var _0x410173='shift',_0x267d55='push',_0x4f3520='‮';if(_0x3198f7<_0x415ef2){while(--_0x415ef2){_0x29bc96=_0x33f02b[_0x410173]();if(_0x3198f7===_0x415ef2&&_0x4f3520==='‮'&&_0x4f3520['length']===0x1){_0x3198f7=_0x29bc96,_0x23cb6f=_0x33f02b[_0x2c66c0+'p']();}else if(_0x3198f7&&_0x23cb6f['replace'](/[ZqgFfGpSXFKNXfV=]/g,'')===_0x3198f7){_0x33f02b[_0x267d55](_0x29bc96);}}_0x33f02b[_0x267d55](_0x33f02b[_0x410173]());}return 0x1027b9;};return _0x33ca46(++_0x52dcc8,_0x50ae3f)>>_0x52dcc8^_0x50ae3f;}(O00O,0xbf,0xbf00),O00O){OＯ0$_=O00O['length']^0xbf;};function O0QQ(_0x2699a9,_0x501e82){_0x2699a9=~~'0x'['concat'](_0x2699a9['slice'](0x1));var _0x4a9879=O00O[_0x2699a9];if(O0QQ['QOO0OO']===undefined){(function(){var _0x589c6d=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x5b08bd='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x589c6d['atob']||(_0x589c6d['atob']=function(_0x4ef491){var _0x11657b=String(_0x4ef491)['replace'](/=+$/,'');for(var _0x26c666=0x0,_0x2ad2ff,_0x4cbc11,_0x425aa0=0x0,_0x51f58a='';_0x4cbc11=_0x11657b['charAt'](_0x425aa0++);~_0x4cbc11&&(_0x2ad2ff=_0x26c666%0x4?_0x2ad2ff*0x40+_0x4cbc11:_0x4cbc11,_0x26c666++%0x4)?_0x51f58a+=String['fromCharCode'](0xff&_0x2ad2ff>>(-0x2*_0x26c666&0x6)):0x0){_0x4cbc11=_0x5b08bd['indexOf'](_0x4cbc11);}return _0x51f58a;});}());function _0x4e130a(_0x327155,_0x501e82){var _0x44b31e=[],_0x58157c=0x0,_0x1d33e,_0x4086cd='',_0x4880bf='';_0x327155=atob(_0x327155);for(var _0x5f7f12=0x0,_0x11bf85=_0x327155['length'];_0x5f7f12<_0x11bf85;_0x5f7f12++){_0x4880bf+='%'+('00'+_0x327155['charCodeAt'](_0x5f7f12)['toString'](0x10))['slice'](-0x2);}_0x327155=decodeURIComponent(_0x4880bf);for(var _0x2a1a7e=0x0;_0x2a1a7e<0x100;_0x2a1a7e++){_0x44b31e[_0x2a1a7e]=_0x2a1a7e;}for(_0x2a1a7e=0x0;_0x2a1a7e<0x100;_0x2a1a7e++){_0x58157c=(_0x58157c+_0x44b31e[_0x2a1a7e]+_0x501e82['charCodeAt'](_0x2a1a7e%_0x501e82['length']))%0x100;_0x1d33e=_0x44b31e[_0x2a1a7e];_0x44b31e[_0x2a1a7e]=_0x44b31e[_0x58157c];_0x44b31e[_0x58157c]=_0x1d33e;}_0x2a1a7e=0x0;_0x58157c=0x0;for(var _0x3717e1=0x0;_0x3717e1<_0x327155['length'];_0x3717e1++){_0x2a1a7e=(_0x2a1a7e+0x1)%0x100;_0x58157c=(_0x58157c+_0x44b31e[_0x2a1a7e])%0x100;_0x1d33e=_0x44b31e[_0x2a1a7e];_0x44b31e[_0x2a1a7e]=_0x44b31e[_0x58157c];_0x44b31e[_0x58157c]=_0x1d33e;_0x4086cd+=String['fromCharCode'](_0x327155['charCodeAt'](_0x3717e1)^_0x44b31e[(_0x44b31e[_0x2a1a7e]+_0x44b31e[_0x58157c])%0x100]);}return _0x4086cd;}O0QQ['O00QQO']=_0x4e130a;O0QQ['O00Q0O']={};O0QQ['QOO0OO']=!![];}var _0xfdf934=O0QQ['O00Q0O'][_0x2699a9];if(_0xfdf934===undefined){if(O0QQ['QQOO0O']===undefined){O0QQ['QQOO0O']=!![];}_0x4a9879=O0QQ['O00QQO'](_0x4a9879,_0x501e82);O0QQ['O00Q0O'][_0x2699a9]=_0x4a9879;}else{_0x4a9879=_0xfdf934;}return _0x4a9879;};const notify=$['isNode']()?require(O0QQ('‫0','X1#q')):'';const jdCookieNode=$['isNode']()?require(O0QQ('‮1','wTJT')):'';CryptoJS=$['isNode']()?require('crypto-js'):CryptoJS;let cookiesArr=[],cookie='';if($['isNode']()){Object[O0QQ('‮2','W3#n')](jdCookieNode)[O0QQ('‮3','@v$L')](O0Q0O=>{cookiesArr[O0QQ('‮4','81[*')](jdCookieNode[O0Q0O]);});if(process[O0QQ('‮5','RQAP')][O0QQ('‫6','(Gf7')]&&process['env'][O0QQ('‫6','(Gf7')]===O0QQ('‫7','KDgo'))console[O0QQ('‫8','q4Fa')]=()=>{};}else{cookiesArr=[$['getdata'](O0QQ('‮9','ez@n')),$[O0QQ('‮a','W3#n')](O0QQ('‫b','KDgo')),...jsonParse($['getdata']('CookiesJD')||'[]')['map'](O00OO=>O00OO['cookie'])][O0QQ('‫c','o2or')](O0Q00=>!!O0Q00);}let activityId='JRYX091301';let time=Date[O0QQ('‫d','4aQN')]();let allMessage='';!(async()=>{var Q0OQO={'QOOO':function(Q0O0O,QO000){return Q0O0O===QO000;},'OO0O':O0QQ('‮e','cm9G'),'OOQO':O0QQ('‫f','W*0l'),'OQOQ':O0QQ('‫10','ZDAk'),'OOOO':function(QOQ0O,QOQQQ){return QOQ0O<QOQQQ;},'QQQQ':function(QQOOQ,QO0Q0){return QQOOQ(QO0Q0);},'O0O0':function(QOQQO,QOQ0Q){return QOQQO+QOQ0Q;},'QQ0Q':O0QQ('‫11','PO1J'),'OQOO':function(OQQO0){return OQQO0();}};if(!cookiesArr[0x0]){if(Q0OQO[O0QQ('‫12','s$K$')](Q0OQO[O0QQ('‮13','PQ&2')],Q0OQO['OOQO'])){console[O0QQ('‫14','J#r%')](err);}else{$[O0QQ('‮15','zL7Q')]($[O0QQ('‮16','!)xI')],Q0OQO['OQOQ'],'https://bean.m.jd.com/bean/signIndex.action',{'open-url':O0QQ('‮17','*jFC')});return;}}for(let OOO00=0x0;Q0OQO['OOOO'](OOO00,cookiesArr[O0QQ('‮18','(Gf7')]);OOO00++){if(cookiesArr[OOO00]){cookie=cookiesArr[OOO00];$['UserName']=Q0OQO[O0QQ('‫19','*jFC')](decodeURIComponent,cookie[O0QQ('‮1a','W*0l')](/pt_pin=([^; ]+)(?=;?)/)&&cookie['match'](/pt_pin=([^; ]+)(?=;?)/)[0x1]);$['index']=Q0OQO['O0O0'](OOO00,0x1);$['isLogin']=!![];$[O0QQ('‮1b','JMp3')]='';message='';console['log'](O0QQ('‮1c','@v$L')+$[O0QQ('‫1d','b5m5')]+'】'+($[O0QQ('‫1e','j0wX')]||$[O0QQ('‮1f','(Gf7')])+O0QQ('‫20','wTCw'));if(!$[O0QQ('‮21','hJqU')]){$['msg']($[O0QQ('‮22','ez@n')],'【提示】cookie已失效','京东账号'+$['index']+'\x20'+($[O0QQ('‮23','Etqp')]||$[O0QQ('‫24','qFu&')])+O0QQ('‫25','ez@n'),{'open-url':Q0OQO[O0QQ('‮26','SPDu')]});if($[O0QQ('‫27','hcEw')]()){await notify[O0QQ('‮28','b5m5')]($[O0QQ('‫29','(Gf7')]+'cookie已失效\x20-\x20'+$['UserName'],O0QQ('‫2a','W3#n')+$[O0QQ('‮2b','W*0l')]+'\x20'+$['UserName']+O0QQ('‫2c','W3#n'));}continue;}await Q0OQO[O0QQ('‮2d','*jFC')](main);await $[O0QQ('‫2e','4aQN')](0x7d0);}}if(allMessage){if($[O0QQ('‮2f','b5m5')]())await notify['sendNotify'](''+$[O0QQ('‮30','Cx)*')],''+allMessage);$[O0QQ('‮31','VRbx')]($['name'],'',allMessage);}})()['catch'](QQOOO=>{$['log']('','❌\x20'+$[O0QQ('‫29','(Gf7')]+',\x20失败!\x20原因:\x20'+QQOOO+'!','');})[O0QQ('‫32','SPDu')](()=>{$[O0QQ('‫33','C0b&')]();});async function main(){var Q0OQQ={'Q00O':O0QQ('‮34','Kgcz'),'O0QO0':function(Q0O0Q){return Q0O0Q();},'QOOOQ':function(O00OQ){return O00OQ();},'QQO0Q':function(O0QQ0){return O0QQ0();}};var O0QOO=Q0OQQ['Q00O']['split']('|'),O0QOQ=0x0;while(!![]){switch(O0QOO[O0QOQ++]){case'0':await Q0OQQ['O0QO0'](query_activetemporary);continue;case'1':await $[O0QQ('‮35','^^lc')](0x1f4);continue;case'2':await Q0OQQ[O0QQ('‮36','j0wX')](draw_activetemporary);continue;case'3':await $[O0QQ('‫37','*jFC')](0x1f4);continue;case'4':await Q0OQQ[O0QQ('‫38','W3#n')](query_tempactivconfig);continue;}break;}}function query_tempactivconfig(){var QO0QQ={'QQOQQ':function(QOOO0,QO00Q){return QOOO0+QO00Q;},'QQO0O':O0QQ('‫39','wTCw'),'QQOQO':function(QO0QO,QO00O){return QO0QO!==QO00O;},'Q0QOQ':'QQOQ','Q00O0':'O0Q0','Q0QOO':function(OOOOQ,OOOOO){return OOOOQ!==OOOOO;},'QQQO0':'QO0O','QOOQ0':function(OQO0Q,OQOQQ){return OQO0Q===OQOQQ;},'QOO00':O0QQ('‫3a','SPDu'),'OOQ0Q':function(OQO0O,QQO00){return OQO0O!==QQO00;},'OO000':O0QQ('‮3b','Y*i!'),'OOQ0O':function(OQOQO,QQOQ0){return OQOQO+QQOQ0;},'OOQQQ':O0QQ('‫3c','^^lc'),'OQOOQ':function(Q0QO0,O00O0){return Q0QO0(O00O0);},'OOQQO':function(O0Q0QO,O0Q00O){return O0Q0QO||O0Q00O;},'OQOOO':O0QQ('‫3d','(0Lb'),'Q00OQ':O0QQ('‮3e','^^lc'),'Q00OO':'keep-alive','O0OQO':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2014_2\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/14.0.1\x20Mobile/15E148\x20Safari/604.1'};return new Promise(async O00OOQ=>{const QOO00O={'url':O0QQ('‮3f','hJqU')+activityId+O0QQ('‫40','ez@n')+time+'&sceneval=2&g_login_type=1&callback=query_tempactivconfig&g_ty=ls&appCode=msc588d6d5','headers':{'Accept':QO0QQ[O0QQ('‮41','u%uB')],'Accept-Encoding':O0QQ('‮42','ZDAk'),'Accept-Language':QO0QQ[O0QQ('‫43','u%uB')],'Connection':QO0QQ[O0QQ('‫44','W*0l')],'Cookie':cookie,'Host':'wq.jd.com','Referer':'https://wq.jd.com/activet2/looktreasure/query_tempactivconfig?uuid='+activityId+O0QQ('‮45','VRbx')+time+O0QQ('‫46','!)xI'),'User-Agent':QO0QQ[O0QQ('‮47','cm9G')]}};$[O0QQ('‫48','Xn7[')](QOO00O,(QOO0QQ,QOOOO0,O00OOO)=>{var QOO0QO={'OO0QQ':function(QQQO0Q,QQQOQQ){return QO0QQ['QQOQQ'](QQQO0Q,QQQOQQ);},'OOOO0':QO0QQ[O0QQ('‮49','^^lc')]};if(QO0QQ[O0QQ('‮4a','PO1J')](QO0QQ[O0QQ('‮4b','wTJT')],QO0QQ[O0QQ('‮4c','u%uB')])){try{if(QO0QQ[O0QQ('‮4d','9aU8')](QO0QQ['QQQO0'],QO0QQ[O0QQ('‫4e','PO1J')])){$['logErr'](e,QOOOO0);}else{if(QOO0QQ){if(QO0QQ[O0QQ('‮4f','j0wX')]('QOQO',QO0QQ[O0QQ('‮50','RBcq')])){console['log'](QOO0QQ);}else{if(QOO0QQ){console['log'](QOO0QQ);}else{$[O0QQ('‮51','X1#q')]=O00OOO['match'](/"backEnd":"(.+?)"/);if($['backEnd']){$[O0QQ('‮52','hcEw')]=$['backEnd'][0x1];}console['log'](QOO0QO['OO0QQ'](QOO0QO['OOOO0'],$[O0QQ('‮53','YWeD')]));}}}else{$[O0QQ('‫54','XzUM')]=O00OOO[O0QQ('‮55','ZDAk')](/"backEnd":"(.+?)"/);if($[O0QQ('‫56','W*0l')]){if(QO0QQ['OOQ0Q'](QO0QQ[O0QQ('‮57','dqso')],O0QQ('‮58','*jFC'))){$[O0QQ('‫59','J#r%')]=$[O0QQ('‫5a','(Gf7')][0x1];}else{$['backEnd']=$[O0QQ('‮5b','u%uB')][0x1];}}console[O0QQ('‫5c','qFu&')](QO0QQ[O0QQ('‮5d','*jFC')](O0QQ('‮5e','(0Lb'),$[O0QQ('‮5f','l[6J')]));}}}catch(QOOQQQ){$[O0QQ('‫60','o2or')](QOOQQQ,QOOOO0);}finally{if(QO0QQ['OOQQQ']!==QO0QQ[O0QQ('‫61','j0wX')]){$[O0QQ('‫62','wTCw')]();}else{QO0QQ[O0QQ('‮63','^^lc')](O00OOQ,QO0QQ[O0QQ('‫64','W3#n')](O00OOO,{}));}}}else{console[O0QQ('‮65','Cx)*')](QOO0QQ);}});});}function query_activetemporary(){var O0Q000={'QQQOO':O0QQ('‫66','wTJT'),'QOOQQ':O0QQ('‫67','b5m5'),'QQ0O0':function(O0QQ0O,O0QQ0Q){return O0QQ0O===O0QQ0Q;},'OO0OO':O0QQ('‮68','@v$L'),'OOQQ0':function(O0QOOO,QOO0Q0){return O0QOOO+QOO0Q0;},'OO0OQ':O0QQ('‮69',']xy9'),'OOQ00':function(QOOQQO,QOOQ0O){return QOOQQO!==QOOQ0O;},'OQ0QQ':O0QQ('‮6a','!)xI'),'OQ00Q':function(QOO000,O00O00){return QOO000!==O00O00;},'OQOO0':O0QQ('‮6b','j0wX'),'OQ0QO':'OQQO','OQ00O':function(O00OQO,O00O0O){return O00OQO(O00O0O);},'Q0000':O0QQ('‫6c','SPDu'),'Q00Q0':O0QQ('‫6d','*jFC'),'Q0QQO':O0QQ('‮6e','4aQN'),'O0OQ0':O0QQ('‫6f','b5m5')};return new Promise(async QOOQ00=>{const QOO0OQ={'url':O0QQ('‫70','SPDu')+$['backEnd']+'&_='+time+O0QQ('‮71','RQAP'),'headers':{'Accept':O0QQ('‫72','dqso'),'Accept-Encoding':O0Q000[O0QQ('‮73','Etqp')],'Accept-Language':O0QQ('‮74','PO1J'),'Connection':O0Q000['Q00Q0'],'Cookie':cookie,'Host':O0Q000[O0QQ('‫75','Kgcz')],'Referer':'https://wq.jd.com/activet2/looktreasure/query_activetemporary?sceneval=2&backendId='+$['backEnd']+O0QQ('‮76','JMp3')+time+'&sceneval=2&g_login_type=1&callback=query_activetemporary&g_ty=ls&appCode=msc588d6d5','User-Agent':O0Q000['O0OQ0']}};$['get'](QOO0OQ,(O0Q0QQ,O0Q00Q,O0QOO0)=>{var O0QO00={'O0OQQ':function(O0QOQ0,QOOO00){return O0QOQ0==QOOO00;},'Q0Q00':O0Q000[O0QQ('‫77','(8ed')]};try{if(O0Q0QQ){if(O0QQ('‫78','81[*')!==O0Q000[O0QQ('‫79','hJqU')]){if(O0QO00[O0QQ('‮7a','VRbx')](typeof JSON[O0QQ('‫7b','JMp3')](O0QOO0),O0QO00['Q0Q00'])){return!![];}}else{console['log'](O0Q0QQ);}}else{if(O0Q000['QQ0O0'](O0Q000['OO0OO'],O0Q000[O0QQ('‮7c','(Gf7')])){$[O0QQ('‫7d','(Gf7')]=O0QOO0[O0QQ('‫7e','q4Fa')](/"sPrizeDesc":"(.+?)"/);if($[O0QQ('‫7f','Xn7[')]){$[O0QQ('‫80','RBcq')]=$[O0QQ('‫81','SPDu')][0x1];console[O0QQ('‫82','PO1J')](O0Q000[O0QQ('‫83','9aU8')](O0Q000['OO0OQ'],$[O0QQ('‮84','^^lc')]));}}else{$['nickName']=$['UserName'];}}}catch(O00OQQ){if(O0Q000[O0QQ('‫85','Xn7[')](O0QQ('‫86','dqso'),O0Q000[O0QQ('‮87','W*0l')])){console[O0QQ('‫88','b5m5')](O00OQQ);console[O0QQ('‮89','XzUM')](O0QQ('‮8a','cm9G'));return![];}else{$[O0QQ('‮8b','cm9G')](O00OQQ,O0Q00Q);}}finally{if(O0Q000['OQ00Q'](O0Q000[O0QQ('‮8c','!)xI')],O0Q000[O0QQ('‮8d',']xy9')])){O0Q000[O0QQ('‫8e','*jFC')](QOOQ00,O0QOO0||{});}else{console[O0QQ('‫8f','C0b&')](O0Q0QQ);}}});});}function draw_activetemporary(){var QQQOOO={'O0O00':function(QQQ00Q,QO00OO){return QQQ00Q(QO00OO);},'Q0Q0Q':function(QO0QQ0,QOOOOQ){return QO0QQ0||QOOOOQ;},'Q00QO':O0QQ('‮90','u%uB'),'QQ0OQ':O0QQ('‮91','qFu&'),'QQ0OO':'keep-alive','QQQ00':'wq.jd.com','QQQQ0':O0QQ('‮92','(0Lb')};return new Promise(async QO0Q00=>{const O0QOOQ={'url':O0QQ('‮93','!)xI')+$[O0QQ('‫59','J#r%')]+O0QQ('‮94','X1#q')+time+'&sceneval=2&g_login_type=1&callback=draw_activetemporary&g_ty=ls&appCode=msc588d6d5','headers':{'Accept':'*/*','Accept-Encoding':QQQOOO[O0QQ('‮95','Kgcz')],'Accept-Language':QQQOOO['QQ0OQ'],'Connection':QQQOOO['QQ0OO'],'Cookie':cookie,'Host':QQQOOO[O0QQ('‮96','Cx)*')],'Referer':O0QQ('‮97','4aQN')+$[O0QQ('‮98','PO1J')]+O0QQ('‫99','81[*')+time+O0QQ('‫9a','4aQN'),'User-Agent':QQQOOO['QQQQ0']}};$['get'](O0QOOQ,(QQ0OQO,QQ0O0O,QQ0OQQ)=>{try{if(QQ0OQO){console[O0QQ('‫9b','SPDu')](QQ0OQO);}else{}}catch(O0QOQO){$['logErr'](O0QOQO,QQ0O0O);}finally{QQQOOO['O0O00'](QO0Q00,QQQOOO[O0QQ('‫9c','^^lc')](QQ0OQQ,{}));}});});}function TotalBean(){var QQ0O0Q={'OQ0OO':O0QQ('‮9d','u%uB'),'OQQ00':function(O0QOQQ,O0QO0O){return O0QOQQ(O0QO0O);},'OQQQ0':function(QOOOOO,QO0QO0){return QOOOOO||QO0QO0;},'QQQQO':function(QQQO00,QQQOQ0){return QQQO00===QQQOQ0;},'QQ0Q0':O0QQ('‮9e','Cx)*'),'Q0OOO':O0QQ('‮9f','l[6J'),'Q0OOQ':function(QQQOOQ,QOO00Q){return QQQOOQ!==QOO00Q;},'O000Q':O0QQ('‫a0','81[*'),'O0OO0':O0QQ('‮a1','PO1J'),'O0000':O0QQ('‫a2','(Gf7'),'O0QQQ':O0QQ('‫a3','l[6J'),'O0Q0Q':'QQQ0','O00Q0':O0QQ('‮a4','wTJT'),'Q0OQ0':O0QQ('‮a5','J#r%'),'QO0OO':'zh-cn','QOQQ0':'keep-alive','QOQ00':O0QQ('‮a6','4aQN'),'QQ00Q':O0QQ('‫a7','wTCw')};return new Promise(async QO0QOO=>{var QO00O0={'QOQO0':QQ0O0Q[O0QQ('‫a8','cm9G')],'OQ000':function(QQ0OO0,QQ00QQ){return QQ0O0Q[O0QQ('‮a9','*jFC')](QQ0OO0,QQ00QQ);},'OQQQQ':function(QQ000Q,O00QOO){return QQ0O0Q['OQQQ0'](QQ000Q,O00QOO);},'Q0OO0':function(QQQQQO,O000O0){return QQ0O0Q[O0QQ('‮aa','q4Fa')](QQQQQO,O000O0);},'O0OOO':QQ0O0Q['QQ0Q0'],'O00QQ':function(QQQQ0O,QQQ000){return QQ0O0Q[O0QQ('‫ab','ez@n')](QQQQ0O,QQQ000);},'O000O':QQ0O0Q[O0QQ('‮ac','W*0l')],'O00QO':function(QQQ0Q0,O00QOQ){return QQ0O0Q['Q0OOQ'](QQQ0Q0,O00QOQ);},'QQQ0Q':O0QQ('‮ad','XzUM'),'QOQOO':QQ0O0Q[O0QQ('‫ae','^^lc')],'QO0O0':function(QQQ0OQ,QQQQ00){return QQQ0OQ===QQQQ00;},'QQQQQ':QQ0O0Q[O0QQ('‮af','Xn7[')],'QQ000':QQ0O0Q[O0QQ('‫b0','ZDAk')],'QQQ0O':function(O0OOOO){return O0OOOO();},'OQ0OQ':QQ0O0Q['O0QQQ']};if(QQ0O0Q['QQQQO'](QQ0O0Q[O0QQ('‮b1','ZfhG')],QQ0O0Q['O0Q0Q'])){const O0OOOQ={'url':O0QQ('‫b2','RQAP'),'headers':{'Accept':O0QQ('‮b3','*jFC'),'Content-Type':QQ0O0Q[O0QQ('‫b4','ZDAk')],'Accept-Encoding':QQ0O0Q[O0QQ('‫b5','PO1J')],'Accept-Language':QQ0O0Q[O0QQ('‮b6','@v$L')],'Connection':QQ0O0Q[O0QQ('‫b7','Etqp')],'Cookie':cookie,'Referer':QQ0O0Q[O0QQ('‫b8','hJqU')],'User-Agent':$[O0QQ('‮b9','@v$L')]()?process[O0QQ('‮ba',']xy9')][O0QQ('‮bb','9aU8')]?process['env']['JD_USER_AGENT']:QQ0O0Q[O0QQ('‫bc','!)xI')](require,QQ0O0Q['QQ00Q'])[O0QQ('‮bd','Xn7[')]:$[O0QQ('‮be','*jFC')](O0QQ('‫bf','VRbx'))?$[O0QQ('‮c0','(8ed')]('JDUA'):O0QQ('‮c1','PQ&2')}};$[O0QQ('‮c2','X1#q')](O0OOOQ,(QQ0OOO,Q0OQO0,QQ0OOQ)=>{var O0OOQO={'OQQQO':function(O00Q00,O000OO){return O00Q00===O000OO;},'OQ0Q0':function(O000OQ,O00QQ0){return QO00O0[O0QQ('‫c3','Xn7[')](O000OQ,O00QQ0);},'Q000Q':O0QQ('‫c4','hcEw'),'Q00QQ':QO00O0['QOQO0']};try{if(QQ0OOO){if(QO00O0[O0QQ('‫c5',']xy9')](QO00O0['O0OOO'],QO00O0[O0QQ('‫c6','zL7Q')])){console[O0QQ('‫c7','ZfhG')](''+JSON['stringify'](QQ0OOO));console['log']($[O0QQ('‮c8','81[*')]+'\x20API请求失败，请检查网路重试');}else{$['nickName']=QQ0OOQ[QO00O0[O0QQ('‮c9','Ik4N')]]&&QQ0OOQ[O0QQ('‮ca','XzUM')][O0QQ('‫cb','9aU8')]||$['UserName'];}}else{if(QQ0OOQ){QQ0OOQ=JSON[O0QQ('‫cc','KDgo')](QQ0OOQ);if(QO00O0[O0QQ('‮cd','VRbx')](QQ0OOQ[QO00O0[O0QQ('‫ce','W3#n')]],0xd)){if(QO00O0['O00QO'](QO00O0[O0QQ('‫cf','Cx)*')],QO00O0['QOQOO'])){$[O0QQ('‮d0','JMp3')]=![];return;}else{console['log'](O0QQ('‮d1','q4Fa'));}}if(QO00O0['QO0O0'](QQ0OOQ[O0QQ('‮d2','(8ed')],0x0)){$[O0QQ('‮1b','JMp3')]=QQ0OOQ[QO00O0[O0QQ('‫d3','W3#n')]]&&QQ0OOQ[QO00O0[O0QQ('‫d4','4aQN')]][O0QQ('‮d5','Y*i!')]||$['UserName'];}else{if(QO00O0[O0QQ('‮d6','PO1J')]!==O0QQ('‫d7','(Gf7')){QO00O0[O0QQ('‮d8','KDgo')](QO0QOO,QO00O0[O0QQ('‫d9','ZfhG')](QQ0OOQ,{}));}else{$[O0QQ('‮da','wTJT')]=$[O0QQ('‮db','j0wX')];}}}else{console['log'](O0QQ('‮dc','PO1J'));}}}catch(QQQ0QO){if(QO00O0['QQ000']!=='QO00'){QQ0OOQ=JSON['parse'](QQ0OOQ);if(O0OOQO[O0QQ('‮dd','j0wX')](QQ0OOQ[O0QQ('‮de','PQ&2')],0xd)){$[O0QQ('‮df','hcEw')]=![];return;}if(O0OOQO[O0QQ('‫e0','YWeD')](QQ0OOQ[O0OOQO['Q000Q']],0x0)){$['nickName']=QQ0OOQ[O0OOQO['Q00QQ']]&&QQ0OOQ[O0OOQO[O0QQ('‫e1','JMp3')]][O0QQ('‫e2','@v$L')]||$['UserName'];}else{$['nickName']=$[O0QQ('‮e3','l[6J')];}}else{$['logErr'](QQQ0QO,Q0OQO0);}}finally{QO00O0[O0QQ('‮e4','*jFC')](QO0QOO);}});}else{console[O0QQ('‫e5','KDgo')](e);$[O0QQ('‫e6','q4Fa')]($[O0QQ('‫e7','9aU8')],'',QO00O0[O0QQ('‮e8',']xy9')]);return[];}});}function safeGet(O0OOQ0){var O0OO00={'OOO0Q':function(QQ0OQ0,O0QQO0){return QQ0OQ0+O0QQO0;},'OOO0O':function(QQ0O00,Q0O0O0){return QQ0O00===Q0O0O0;},'OQ0O0':O0QQ('‫e9','ZfhG'),'OOOQQ':O0QQ('‫ea','qFu&'),'OOOQO':function(Q0OQOQ,Q0OQOO){return Q0OQOQ==Q0OQOO;},'QQ0QO':O0QQ('‮eb','9aU8')};try{if(O0OO00[O0QQ('‮ec','b5m5')](O0OO00[O0QQ('‫ed','@v$L')],O0OO00['OOOQQ'])){$['sPrizeDesc']=$['sPrizeDesc'][0x1];console[O0QQ('‫82','PO1J')](O0OO00['OOO0Q']('宝，获得：',$[O0QQ('‫ee','j0wX')]));}else{if(O0OO00[O0QQ('‫ef','l[6J')](typeof JSON[O0QQ('‮f0','^^lc')](O0OOQ0),O0QQ('‫f1','YWeD'))){if(O0QQ('‫f2','PO1J')===O0OO00[O0QQ('‮f3','Xn7[')]){if(err){console[O0QQ('‮f4','*jFC')](err);}else{}}else{return!![];}}}}catch(QQ0QQ0){if(O0OO00[O0QQ('‫f5','9aU8')]('Q00Q',O0QQ('‮f6','wTJT'))){$['log']('','❌\x20'+$[O0QQ('‫f7','4aQN')]+O0QQ('‮f8','ez@n')+QQ0QQ0+'!','');}else{console[O0QQ('‫f9','Ik4N')](QQ0QQ0);console[O0QQ('‫fa','!)xI')](O0QQ('‮fb','4aQN'));return![];}}}function jsonParse(O00000){var O00QQQ={'Q0O00':function(QOOQQ0,O00Q0Q){return QOOQQ0==O00Q0Q;},'O0QQO':O0QQ('‮fc','J#r%')};if(O00QQQ['Q0O00'](typeof O00000,O00QQQ[O0QQ('‮fd','@v$L')])){try{return JSON[O0QQ('‫fe','qFu&')](O00000);}catch(O000Q0){console[O0QQ('‮ff','cm9G')](O000Q0);$[O0QQ('‮100','(Gf7')]($[O0QQ('‫f7','4aQN')],'',O0QQ('‫101','zL7Q'));return[];}}};OＯ0$='jsjiami.com.v6';


// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }